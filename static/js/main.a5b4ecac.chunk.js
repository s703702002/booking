(this.webpackJsonpbooking=this.webpackJsonpbooking||[]).push([[0],{136:function(e,a,t){e.exports=t(148)},141:function(e,a,t){},148:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(15),c=t.n(l),i=(t(141),t(8)),o=t(74),m=t(235),u=t(228),s=t(229),d=t(213),E=t(150),b=t(231),v=t(218),p=t(109),g=t.n(p),O=t(111),h=t.n(O),S=t(110),j=t.n(S),T=t(239),f=t(193),y=t(112),D=t(232),w=t(233),k=t(197),C=t(195),I=t(196),N=t(68),x=t.n(N);const A=Object(f.a)(e=>({root:{position:"fixed",bottom:e.spacing(4),right:e.spacing(2),zIndex:1200}}));var R=function(){const e=A(),a=Object(C.a)({disableHysteresis:!0,threshold:100});return r.a.createElement(I.a,{in:a},r.a.createElement("div",{onClick:e=>{const a=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");a&&a.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:e.root},r.a.createElement(k.a,{color:"secondary",size:"small","aria-label":"scroll back to top"},r.a.createElement(x.a,null))))},W=t(75);class B extends r.a.Component{constructor(e){super(e),this.state={error:null,errorInfo:null}}componentDidCatch(e,a){this.setState({error:e,errorInfo:a})}render(){return this.state.errorInfo?r.a.createElement("div",null,this.props.fallback||r.a.createElement("h2",null,"Something went wrong."),r.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),r.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}var F=B,M=t(21),H=t(201),_=t(202),Z=t(203),P=t(204),z=t(205),L=t(53),G=t.n(L),U=t(206),J=t(208),$=t(200),V=t(207),q=t(199);const K=e=>fetch("https://ptx.transportdata.tw/MOTC"+e,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate"}}).then(e=>e.json()),X={suspense:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshWhenOffline:!1,refreshWhenHidden:!1,refreshInterval:0};var Y=t(98),Q=t.n(Y);var ee=({order:e})=>"desc"===e?r.a.createElement(Q.a,null):r.a.createElement(x.a,null),ae=t(99);function te(){const e=Object(ae.a)(["\n  width: 100vw;\n  position: fixed;\n  bottom: 0;\n  background-color: #424242;\n  color: #fff;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return te=function(){return e},e}var ne=t(100).a.footer(te()),re=t(245);const le=()=>r.a.createElement(q.a,null,r.a.createElement($.a,{colSpan:"4"},"\u5c1a\u7121\u8cc7\u6599"));var ce=({detail:e,trainDate:a})=>{const t=e.DailyTrainInfo.TrainNo,n=e.OriginStopTime.DepartureTime,l=e.DestinationStopTime.ArrivalTime,c=Object(H.a)("".concat(a," ").concat(n)),i=Object(H.a)("".concat(a," ").concat(l));return r.a.createElement(q.a,null,r.a.createElement($.a,null,r.a.createElement(W.a,{color:"primary"},t)),r.a.createElement($.a,null,n),r.a.createElement($.a,null,l),r.a.createElement($.a,null,Object(re.a)(i,c)," \u5206"))};var ie=({departure:e,arrival:a,trainDate:t,departureTime:l,arrivalTime:c})=>{var o;const m=Object(n.useState)(),u=Object(i.a)(m,2),s=u[0],d=u[1],E=Object(n.useState)(),b=Object(i.a)(E,2),v=b[0],p=b[1],g=e&&a&&t,O=Object(M.a)(()=>g&&"/v2/Rail/THSR/DailyTimetable/OD/".concat(e,"/to/").concat(a,"/").concat(t),K,X).data,h=Object(H.a)("".concat(t," ").concat(l)),S=Object(H.a)("".concat(t," ").concat(c)),j=(O?O.filter(e=>{const a=Object(H.a)("".concat(t," ").concat(e.OriginStopTime.DepartureTime)),n=Object(H.a)("".concat(t," ").concat(e.DestinationStopTime.ArrivalTime));return Object(_.a)(a,h)&&Object(Z.a)(n,S)}):[]).sort((e,a)=>{if("departure"===s){const n=Object(H.a)("".concat(t," ").concat(e.OriginStopTime.DepartureTime)),r=Object(H.a)("".concat(t," ").concat(a.OriginStopTime.DepartureTime));return"desc"===v?Object(P.a)(n,r):Object(z.a)(n,r)}if("arrival"===s){const n=Object(H.a)("".concat(t," ").concat(e.DestinationStopTime.ArrivalTime)),r=Object(H.a)("".concat(t," ").concat(a.DestinationStopTime.ArrivalTime));return"desc"===v?Object(P.a)(n,r):Object(z.a)(n,r)}return!0});return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,null,r.a.createElement(V.a,null,r.a.createElement(q.a,null,r.a.createElement($.a,null,"\u8eca\u6b21"),r.a.createElement($.a,{onClick:()=>{d("departure"),p("desc"===v?"asc":"desc")}},"\u767c\u8eca","departure"===s?r.a.createElement(ee,{order:v}):r.a.createElement(G.a,null)),r.a.createElement($.a,{onClick:()=>{d("arrival"),p("desc"===v?"asc":"desc")}},"\u5230\u9054","arrival"===s?r.a.createElement(ee,{order:v}):r.a.createElement(G.a,null)),r.a.createElement($.a,null,"\u7e3d\u6642\u7a0b"))),r.a.createElement(J.a,null,j.length>0?j.map(e=>r.a.createElement(ce,{key:e.DailyTrainInfo.TrainNo,detail:e,trainDate:t})):r.a.createElement(le,null))),r.a.createElement(ne,null,r.a.createElement(W.a,null,"\u66f4\u65b0\u6642\u9593: ",(null===O||void 0===O||null===(o=O[0])||void 0===o?void 0:o.UpdateTime)||"---")))},oe=t(4),me=t(103),ue=t.n(me),se=t(209),de=t(117);const Ee=Object(oe.a)(e=>({head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}))($.a);var be=({departure:e,arrival:a})=>{var t;const n=e&&a,l=Object(M.a)(()=>n&&"/v2/Rail/THSR/ODFare/".concat(e,"/to/").concat(a),K,X).data,c=(null===l||void 0===l||null===(t=l[0])||void 0===t?void 0:t.Fares)||[];if(c.length<1)return null;const i=l[0].OriginStationName.Zh_tw+l[0].OriginStationName.En,o=l[0].DestinationStationName.Zh_tw+l[0].DestinationStationName.En;return r.a.createElement(m.a,{mt:2},r.a.createElement(m.a,{mb:1},r.a.createElement(W.a,{align:"center",variant:"h4"},"\u7968\u50f9\u8cc7\u8a0a")),r.a.createElement(se.a,{component:de.a},r.a.createElement(U.a,null,r.a.createElement(V.a,null,r.a.createElement(q.a,null,r.a.createElement(Ee,{colSpan:"3"},i,"\xa0",r.a.createElement(ue.a,null),"\xa0",o))),r.a.createElement(J.a,null,r.a.createElement(q.a,null,c.map(e=>r.a.createElement($.a,{key:e.Price},e.TicketType,": ",r.a.createElement("strong",null,e.Price)," \u5143")))))))},ve=t(56),pe=t(234),ge=t(240),Oe=t(244),he=t(217),Se=t(243),je=t(216),Te=t(215),fe=t(236),ye=t(214);const De=e=>r.a.createElement(fe.a,e,r.a.createElement(ye.a,{value:"06:00"},"06:00"),r.a.createElement(ye.a,{value:"07:00"},"07:00"),r.a.createElement(ye.a,{value:"08:00"},"08:00"),r.a.createElement(ye.a,{value:"09:00"},"09:00"),r.a.createElement(ye.a,{value:"10:00"},"10:00"),r.a.createElement(ye.a,{value:"11:00"},"11:00"),r.a.createElement(ye.a,{value:"12:00"},"12:00"),r.a.createElement(ye.a,{value:"13:00"},"13:00"),r.a.createElement(ye.a,{value:"14:00"},"14:00"),r.a.createElement(ye.a,{value:"15:00"},"15:00"),r.a.createElement(ye.a,{value:"16:00"},"16:00"),r.a.createElement(ye.a,{value:"17:00"},"17:00"),r.a.createElement(ye.a,{value:"18:00"},"18:00"),r.a.createElement(ye.a,{value:"19:00"},"19:00"),r.a.createElement(ye.a,{value:"20:00"},"20:00"),r.a.createElement(ye.a,{value:"21:00"},"21:00"),r.a.createElement(ye.a,{value:"22:00"},"22:00"),r.a.createElement(ye.a,{value:"23:00"},"23:00"),r.a.createElement(ye.a,{value:"24:00"},"24:00"));var we=e=>{let a=e.options,t=Object(o.a)(e,["options"]);return r.a.createElement(fe.a,t,a.length>0?a.map(e=>r.a.createElement(ye.a,{key:e.value,value:e.value},e.Zh_tw+e.En)):r.a.createElement(ye.a,{value:""},"\u7121\u8cc7\u6599"))};var ke=({onSearch:e,className:a})=>{const t=Object(n.useState)(Object(pe.a)(Date.now(),"yyyy-MM-dd")),l=Object(i.a)(t,2),c=l[0],o=l[1],u=Object(n.useState)("1000"),s=Object(i.a)(u,2),d=s[0],E=s[1],b=Object(n.useState)("1070"),v=Object(i.a)(b,2),p=v[0],g=v[1],O=Object(n.useState)(Object(pe.a)(Date.now(),"HH:00")),h=Object(i.a)(O,2),S=h[0],j=h[1],T=Object(n.useState)(Object(pe.a)(Object(ge.a)(Date.now(),{hours:3}),"HH:00")),f=Object(i.a)(T,2),y=f[0],D=f[1],w=Object(M.a)("/v2/Rail/THSR/Station",K,X).data,k=w?w.map(e=>Object(ve.a)({value:e.StationID},e.StationName)):[];return r.a.createElement(m.a,{my:2},r.a.createElement(de.a,null,r.a.createElement(Te.a,null,r.a.createElement(je.a,{margin:"normal",fullWidth:!0},r.a.createElement(Oe.a,{type:"date",id:"trip-start",value:c,onChange:e=>o(e.currentTarget.value),variant:"outlined",label:"\u65e5\u671f"})),r.a.createElement(je.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(Se.a,{id:"OrginStation"},"\u8d77\u7ad9"),r.a.createElement(we,{label:"\u8d77\u7ad9",labelId:"OrginStation",options:k,value:d,onChange:e=>E(e.target.value)})),r.a.createElement(je.a,{margin:"normal",fullWidth:!0},r.a.createElement(he.a,{style:{width:150,margin:"0 auto"},size:"small",variant:"contained",color:"primary",onClick:()=>{E(p),g(d)}},"\u8d77\u8fc4\u7ad9\u4ea4\u63db")),r.a.createElement(je.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(Se.a,{id:"DestinationStation"},"\u8fc4\u7ad9"),r.a.createElement(we,{label:"\u8fc4\u7ad9",labelId:"DestinationStation",options:k,value:p,onChange:e=>g(e.target.value)})),r.a.createElement(je.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(Se.a,{id:"DepartureTime"},"\u6700\u65e9\u51fa\u767c"),r.a.createElement(De,{label:"\u6700\u65e9\u51fa\u767c",labelId:"DepartureTime",value:S,onChange:e=>j(e.target.value)})),r.a.createElement(je.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(Se.a,{id:"ArrivalTime"},"\u6700\u665a\u62b5\u9054"),r.a.createElement(De,{label:"\u6700\u665a\u62b5\u9054",labelId:"ArrivalTime",value:y,onChange:e=>D(e.target.value)})),r.a.createElement(je.a,{fullWidth:!0,margin:"normal"},r.a.createElement(he.a,{size:"large",variant:"contained",color:"primary",onClick:()=>e({date:c,departure:d,arrival:p,departureTime:S,arrivalTime:y}),disabled:!d||!p},"\u67e5\u8a62")))))};const Ce=r.a.createElement(W.a,{align:"center",variant:"h6",color:"error"},"\u5f88\u62b1\u6b49\uff0c\u7cfb\u7d71\u5fd9\u788c\u4e2d");var Ie=()=>{const e=Object(n.useState)(""),a=Object(i.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(""),o=Object(i.a)(c,2),u=o[0],s=o[1],d=Object(n.useState)(""),E=Object(i.a)(d,2),b=E[0],v=E[1],p=Object(n.useState)(""),g=Object(i.a)(p,2),O=g[0],h=g[1],S=Object(n.useState)(""),j=Object(i.a)(S,2),T=j[0],f=j[1];return r.a.createElement(m.a,{paddingBottom:8},r.a.createElement(W.a,{align:"center",variant:"h3"},"\u9ad8\u9435\u6642\u523b\u67e5\u8a62"),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get stations...")},r.a.createElement(ke,{onSearch:({date:e,departure:a,arrival:t,departureTime:n,arrivalTime:r})=>{l(e),s(a),v(t),h(n),f(r)}})),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get train details...")},r.a.createElement(ie,{departure:u,arrival:b,trainDate:t,departureTime:O,arrivalTime:T})),r.a.createElement(F,{fallback:Ce},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get prize detail...")},r.a.createElement(be,{departure:u,arrival:b}))))},Ne=t(237),xe=t(107),Ae=t.n(xe);const Re=e=>e*Math.PI/180,We={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};var Be=t(238),Fe=t(104),Me=t.n(Fe),He=t(105),_e=t.n(He);const Ze=r.a.createElement(Me.a,{fontSize:"small"}),Pe=r.a.createElement(_e.a,{fontSize:"small"}),ze=[{text:"\u4e0d\u9650",value:"0"},{text:"\u592a\u9b6f\u95a3",value:"1"},{text:"\u666e\u60a0\u746a",value:"2"},{text:"\u81ea\u5f37",value:"3"},{text:"\u8392\u5149",value:"4"},{text:"\u5fa9\u8208",value:"5"},{text:"\u5340\u9593",value:"6"},{text:"\u666e\u5feb",value:"7"}];var Le=e=>r.a.createElement(Ne.a,Object.assign({multiple:!0,options:ze,disableCloseOnSelect:!0,getOptionLabel:e=>e.text,defaultValue:[ze[0]],limitTags:2,renderOption:(e,{selected:a})=>r.a.createElement(r.a.Fragment,null,r.a.createElement(Be.a,{icon:Ze,checkedIcon:Pe,style:{marginRight:8},checked:a}),e.text),renderInput:e=>r.a.createElement(Oe.a,Object.assign({},e,{variant:"outlined",label:"\u5217\u8eca\u7a2e\u985e"}))},e));const Ge=e=>r.a.createElement(r.a.Fragment,null,e.icon&&r.a.createElement(Ae.a,{color:"primary",style:{marginRight:8}}),e.StationName.Zh_tw+" "+e.StationName.En);var Ue=({onSearch:e})=>{const a=Object(n.useState)(Object(pe.a)(Date.now(),"yyyy-MM-dd")),t=Object(i.a)(a,2),l=t[0],c=t[1],o=Object(n.useState)(null),u=Object(i.a)(o,2),s=u[0],d=u[1],E=Object(n.useState)(null),b=Object(i.a)(E,2),v=b[0],p=b[1],g=Object(n.useState)(Object(pe.a)(Date.now(),"HH:00")),O=Object(i.a)(g,2),h=O[0],S=O[1],j=Object(n.useState)(Object(pe.a)(Object(ge.a)(Date.now(),{hours:3}),"HH:00")),T=Object(i.a)(j,2),f=T[0],y=T[1],D=Object(n.useState)([{text:"\u4e0d\u9650",value:"0"}]),w=Object(i.a)(D,2),k=w[0],C=w[1],I=function(){const e=Object(n.useState)(null),a=Object(i.a)(e,2),t=a[0],r=a[1];function l(e){r(e.coords)}function c(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message)),r({error:e})}return Object(n.useEffect)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(l,c,We):r({error:"You device don't support geolocation api"})},[]),t}(),N=Object(M.a)("/v2/Rail/TRA/Station?$top=500&$format=JSON",K,X).data,x=N?N.filter(e=>"1001"!==e.StationID):[],A=((e,a)=>{let t=null,n=Number.MAX_SAFE_INTEGER;return e&&!e.error&&a.length?(a.forEach(a=>{const r=e.latitude,l=e.longitude,c=a.StationPosition.PositionLat,i=a.StationPosition.PositionLon,o=6378137*Math.acos((m=Math.sin(Re(c))*Math.sin(Re(r))+Math.cos(Re(c))*Math.cos(Re(r))*Math.cos(Re(l)-Re(i)))>1?1:m<-1?-1:m);var m;o<n&&(n=o,t=a)}),Object(ve.a)(Object(ve.a)({},t),{},{StationName:{Zh_tw:"\u6700\u8fd1\u7684\u8eca\u7ad9: ".concat(t.StationName.Zh_tw),En:""},icon:!0,disabled:Boolean(null===e||void 0===e?void 0:e.error)})):null})(I,x),R=x?[A,...x].filter(e=>null!==e):[];return r.a.createElement(m.a,{my:2},r.a.createElement(de.a,null,r.a.createElement(Te.a,null,r.a.createElement(je.a,{margin:"normal",fullWidth:!0},r.a.createElement(Oe.a,{type:"date",id:"trip-start",value:l,onChange:e=>c(e.currentTarget.value),variant:"outlined",label:"\u65e5\u671f"})),r.a.createElement(je.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(Ne.a,{name:"OrginStation",id:"OrginStation",options:R,onChange:(e,a)=>d(a),value:s,renderInput:e=>r.a.createElement(Oe.a,Object.assign({},e,{label:"\u8d77\u7ad9",variant:"outlined"})),renderOption:Ge,getOptionLabel:({StationName:e})=>e.Zh_tw+" "+e.En,getOptionSelected:(e,a)=>e.StationUID===a.StationUID,getOptionDisabled:e=>e.disabled})),r.a.createElement(je.a,{margin:"normal",fullWidth:!0},r.a.createElement(he.a,{style:{width:150,margin:"0 auto"},size:"small",variant:"contained",color:"primary",onClick:()=>{d(v),p(s)}},"\u8d77\u8fc4\u7ad9\u4ea4\u63db")),r.a.createElement(je.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(Ne.a,{name:"DestinationStation",id:"DestinationStation",options:R,onChange:(e,a)=>p(a),value:v,renderInput:e=>r.a.createElement(Oe.a,Object.assign({},e,{label:"\u8fc4\u7ad9",variant:"outlined"})),renderOption:Ge,getOptionLabel:e=>e.StationName.Zh_tw+" "+e.StationName.En,getOptionSelected:(e,a)=>e.StationUID===a.StationUID,getOptionDisabled:e=>e.disabled})),r.a.createElement(je.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(Se.a,{id:"DepartureTime"},"\u6700\u65e9\u51fa\u767c"),r.a.createElement(De,{label:"\u6700\u65e9\u51fa\u767c",labelId:"DepartureTime",value:h,onChange:e=>S(e.target.value)})),r.a.createElement(je.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(Se.a,{id:"ArrivalTime"},"\u6700\u665a\u62b5\u9054"),r.a.createElement(De,{label:"\u6700\u665a\u62b5\u9054",labelId:"ArrivalTime",value:f,onChange:e=>y(e.target.value)})),r.a.createElement(je.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(Le,{name:"trainType",id:"trainType",onChange:(e,a)=>C(a)})),r.a.createElement(je.a,{fullWidth:!0,margin:"normal"},r.a.createElement(he.a,{size:"large",variant:"contained",color:"primary",fullWidth:!0,onClick:()=>e({date:l,departure:s,arrival:v,departureTime:h,arrivalTime:f,trainType:k}),disabled:!s||!v||k.length<1},"\u67e5\u8a62")))))};function Je(e=!1){const a=Object(n.useState)(e),t=Object(i.a)(a,2),r=t[0],l=t[1],c=Object(n.useCallback)(()=>l(!r),[r]);return[r,c]}var $e=t(227),Ve=t(230),qe=t(108),Ke=t.n(qe),Xe=t(226),Ye=t(225),Qe=t(219),ea=t(221),aa=t(223),ta=t(224),na=t(222),ra=t(220);var la=r.a.createContext({trainDate:"",departure:"",arrival:"",departureTime:"",arrivalTime:""});const ca=({station:e,isFirstStaion:a,isLastStation:t})=>{const l=Object(n.useContext)(la),c=l.departure,i=l.arrival,o=e.StationID===c.StationID||e.StationID===i.StationID?"secondary":a||t?"primary":void 0,m="".concat(e.StationName.Zh_tw," ").concat(e.StationName.En);return r.a.createElement(Qe.a,null,r.a.createElement(ra.a,null,r.a.createElement(W.a,{color:"textSecondary"},e.ArrivalTime)),r.a.createElement(ea.a,null,r.a.createElement(na.a,{color:o}),r.a.createElement(aa.a,null)),r.a.createElement(ta.a,null,r.a.createElement(W.a,null,m)))};var ia=({trainNo:e})=>{const a=Object(M.a)(()=>e&&"/v2/Rail/TRA/DailyTimetable/Today/TrainNo/".concat(e),K,X).data,t=a?a[0].StopTimes:[];return r.a.createElement(Ye.a,{align:"right"},t.map((e,a)=>r.a.createElement(ca,{key:e.StationID,station:e,isFirstStaion:0===a,isLastStation:a===t.length-1})))};const oa={0:"\u4e0d\u7d93\u5c71\u6d77\u7dda",1:"\u5c71\u7dda",2:"\u6d77\u7dda"},ma={0:"\u5426",1:"\u662f"},ua={0:"\u5426",1:"\u662f"},sa={0:"\u5426",1:"\u662f"},da={0:"\u5426",1:"\u662f"},Ea={0:"\u5426",1:"\u662f"},ba={0:"\u5426",1:"\u662f"},va={0:"\u5426",1:"\u662f"};var pa=({trainNo:e})=>{const a=Object(M.a)(()=>e&&"/v2/Rail/TRA/DailyTrainInfo/Today/TrainNo/".concat(e),K,X).data;if(!a)return null;const t=a[0],n="".concat(t.StartingStationName.Zh_tw," ").concat(t.StartingStationName.En),l="".concat(t.EndingStationName.Zh_tw," ").concat(t.EndingStationName.En);return r.a.createElement(m.a,{my:2},r.a.createElement(W.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u8d77\u7ad9: "),n),r.a.createElement(W.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u8a16\u7ad9: "),l),r.a.createElement(W.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u5c71\u6d77\u7dda\u985e\u578b: "),oa[t.TripLine]),r.a.createElement(W.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u8a2d\u8eab\u969c\u65c5\u5ba2\u5c08\u7528\u5ea7\u4f4d\u8eca: "),ma[t.WheelchairFlag]),r.a.createElement(W.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u63d0\u4f9b\u884c\u674e\u670d\u52d9: "),ua[t.PackageServiceFlag]),r.a.createElement(W.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u63d0\u4f9b\u8a02\u4fbf\u7576\u670d\u52d9: "),sa[t.DiningFlag]),r.a.createElement(W.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u4eba\u8eca\u540c\u884c\u73ed\u6b21(\u7f6e\u65bc\u651c\u8eca\u888b\u4e4b\u81ea\u884c\u8eca\u5404\u7d1a\u5217\u8eca\u5747\u53ef\u4e58\u8eca): "),da[t.BikeFlag]),r.a.createElement(W.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u8a2d\u6709\u54fa(\u96c6)\u4e73\u5ba4\u8eca\u5ec2: "),Ea[t.BreastFeedingFlag]),r.a.createElement(W.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u6bcf\u65e5\u884c\u99db: "),ba[t.DailyFlag]),r.a.createElement(W.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u70ba\u52a0\u73ed\u8eca: "),va[t.ServiceAddedFlag]),r.a.createElement(W.a,{variant:"body1",gutterBottom:!0},r.a.createElement("strong",null,"\u5176\u4ed6: "),t.Note.Zh_tw," ",t.TrainTypeName.Zh_tw))};const ga=r.a.forwardRef((function(e,a){return r.a.createElement(Xe.a,Object.assign({direction:"up",ref:a},e))})),Oa=Object(f.a)(e=>({appBar:{position:"static"},title:{marginLeft:e.spacing(2),flex:1}}));var ha=({isOpen:e,toggle:a,trainNo:t})=>{const l=Oa();return r.a.createElement($e.a,{fullScreen:!0,open:e,onClose:a,TransitionComponent:ga},r.a.createElement(u.a,{className:l.appBar},r.a.createElement(s.a,null,r.a.createElement(v.a,{edge:"start",color:"inherit",onClick:a,"aria-label":"close"},r.a.createElement(Ke.a,null)),r.a.createElement(W.a,{variant:"h6",className:l.title},"\u8eca\u865f - ",t))),r.a.createElement(Ve.a,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get train today info...")},r.a.createElement(pa,{trainNo:e&&t})),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get train time table...")},r.a.createElement(ia,{trainNo:e&&t}))))};const Sa=()=>r.a.createElement(q.a,null,r.a.createElement($.a,{colSpan:"4"},"\u5c1a\u7121\u8cc7\u6599"));var ja=({detail:e})=>{const a=Je(),t=Object(i.a)(a,2),n=t[0],l=t[1],c=e.DailyTrainInfo.TrainNo,o=e.OriginStopTime.DepartureTime,m=e.DestinationStopTime.ArrivalTime;return r.a.createElement(q.a,null,r.a.createElement($.a,null,r.a.createElement(W.a,{color:"primary"},c)),r.a.createElement($.a,null,o),r.a.createElement($.a,null,m),r.a.createElement($.a,null,r.a.createElement(he.a,{color:"primary",onClick:l},"\u67e5\u770b"),r.a.createElement(ha,{trainNo:c,isOpen:n,toggle:l})))};var Ta=({departure:e,arrival:a,trainDate:t,departureTime:l,arrivalTime:c,trainType:o})=>{var m;const u=Object(n.useState)(),s=Object(i.a)(u,2),d=s[0],E=s[1],b=Object(n.useState)(),v=Object(i.a)(b,2),p=v[0],g=v[1],O=e.StationID&&a.StationID&&t,h=Object(M.a)(()=>O&&"/v2/Rail/TRA/DailyTimetable/OD/".concat(e.StationID,"/to/").concat(a.StationID,"/").concat(t,"?format=JSON"),K,X).data,S=Object(H.a)("".concat(t," ").concat(l)),j=Object(H.a)("".concat(t," ").concat(c)),T=o.map(e=>e.value),f=!T.includes("0"),y=(h?h.filter(e=>{const a=Object(H.a)("".concat(t," ").concat(e.OriginStopTime.DepartureTime)),n=Object(H.a)("".concat(t," ").concat(e.DestinationStopTime.ArrivalTime));return Object(_.a)(a,S)&&Object(Z.a)(n,j)}).filter(e=>!f||T.includes(e.DailyTrainInfo.TrainTypeCode)):[]).sort((e,a)=>{if("departure"===d){const n=Object(H.a)("".concat(t," ").concat(e.OriginStopTime.DepartureTime)),r=Object(H.a)("".concat(t," ").concat(a.OriginStopTime.DepartureTime));return"desc"===p?Object(P.a)(n,r):Object(z.a)(n,r)}if("arrival"===d){const n=Object(H.a)("".concat(t," ").concat(e.DestinationStopTime.ArrivalTime)),r=Object(H.a)("".concat(t," ").concat(a.DestinationStopTime.ArrivalTime));return"desc"===p?Object(P.a)(n,r):Object(z.a)(n,r)}return!0});return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,null,r.a.createElement(V.a,null,r.a.createElement(q.a,null,r.a.createElement($.a,null,"\u8eca\u865f"),r.a.createElement($.a,{onClick:()=>{E("departure"),g("desc"===p?"asc":"desc")}},"\u767c\u8eca","departure"===d?r.a.createElement(ee,{order:p}):r.a.createElement(G.a,null)),r.a.createElement($.a,{onClick:()=>{E("arrival"),g("desc"===p?"asc":"desc")}},"\u5230\u9054","arrival"===d?r.a.createElement(ee,{order:p}):r.a.createElement(G.a,null)),r.a.createElement($.a,null,"\u8a73\u7d30\u8cc7\u8a0a"))),r.a.createElement(J.a,null,y.length>0?y.map(e=>r.a.createElement(ja,{key:e.DailyTrainInfo.TrainNo,detail:e})):r.a.createElement(Sa,null))),r.a.createElement(ne,null,r.a.createElement(W.a,null,"\u66f4\u65b0\u6642\u9593: ",(null===h||void 0===h||null===(m=h[0])||void 0===m?void 0:m.UpdateTime)||"---")))};var fa=()=>{const e=Object(n.useState)(""),a=Object(i.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(""),o=Object(i.a)(c,2),u=o[0],s=o[1],d=Object(n.useState)(""),E=Object(i.a)(d,2),b=E[0],v=E[1],p=Object(n.useState)(""),g=Object(i.a)(p,2),O=g[0],h=g[1],S=Object(n.useState)(""),j=Object(i.a)(S,2),T=j[0],f=j[1],y=Object(n.useState)([]),D=Object(i.a)(y,2),w=D[0],k=D[1];return r.a.createElement(m.a,{paddingBottom:8},r.a.createElement(W.a,{align:"center",variant:"h3"},"\u53f0\u9435\u6642\u523b\u67e5\u8a62"),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get stations...")},r.a.createElement(Ue,{onSearch:({date:e,departure:a,arrival:t,departureTime:n,arrivalTime:r,trainType:c})=>{l(e),s(a),v(t),h(n),f(r),k(c)}})),r.a.createElement(la.Provider,{value:{trainDate:t,departure:u,arrival:b}},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get train details...")},r.a.createElement(Ta,{departure:u,arrival:b,trainDate:t,departureTime:O,arrivalTime:T,trainType:w}))))};function ya(e){let a=e.children,t=e.value,n=e.index,l=Object(o.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},l),t===n&&r.a.createElement(m.a,{pt:2},a))}const Da=Object(f.a)({list:{width:150}}),wa=({toggleDrawer:e,onItemClick:a})=>{const t=Da();return r.a.createElement("div",{className:t.list,role:"presentation",onClick:()=>e(),onKeyDown:()=>e()},r.a.createElement(d.a,null,r.a.createElement(E.a,{button:!0,onClick:()=>a(0)},r.a.createElement(b.a,{primary:"THSR"})),r.a.createElement(E.a,{button:!0,onClick:()=>a(1)},r.a.createElement(b.a,{primary:"TRA"}))))};var ka=function(){const e=Object(n.useState)(0),a=Object(i.a)(e,2),t=a[0],l=a[1],c=Je(),o=Object(i.a)(c,2),m=o[0],d=o[1],E=Je(),b=Object(i.a)(E,2),p=b[0],O=b[1],S=Object(n.useMemo)(()=>Object(y.a)({palette:{type:m?"dark":"light"},overrides:{MuiSvgIcon:{root:{verticalAlign:"middle"}}}}),[m]);return r.a.createElement(D.a,{theme:S},r.a.createElement(w.a,null),r.a.createElement(u.a,{position:"static",id:"back-to-top-anchor"},r.a.createElement(s.a,null,r.a.createElement(v.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:O},r.a.createElement(g.a,null)),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(v.a,{"aria-label":"switchDarkMode",onClick:d,color:"inherit"},m?r.a.createElement(j.a,null):r.a.createElement(h.a,null)))),r.a.createElement(T.a,{anchor:"left",open:p,onClose:O,onOpen:O},r.a.createElement(wa,{toggleDrawer:O,onItemClick:e=>l(e)})),r.a.createElement(ya,{value:t,index:0},r.a.createElement(Ie,null)),r.a.createElement(ya,{value:t,index:1},r.a.createElement(fa,null)),r.a.createElement(R,null))};const Ca=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ia(e,a){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;null!=t&&(t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(ka,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/booking",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const a="".concat("/booking","/service-worker.js");Ca?(!function(e,a){fetch(e).then(t=>{const n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):Ia(e,a)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(a,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Ia(a,e)})}}()}},[[136,1,2]]]);
//# sourceMappingURL=main.a5b4ecac.chunk.js.map