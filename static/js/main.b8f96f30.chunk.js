(this.webpackJsonpbooking=this.webpackJsonpbooking||[]).push([[0],{12:function(e,t,n){e.exports=n.p+"static/media/desc.f06acfc6.svg"},13:function(e,t,n){e.exports=n.p+"static/media/asc.d8be3f88.svg"},14:function(e,t,n){e.exports=n.p+"static/media/exchange.c7b5a736.svg"},20:function(e,t,n){e.exports=n(32)},25:function(e,t,n){},26:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),l=n.n(o),c=(n(25),n(1)),i=(n(26),n(2)),s=n(3);function u(){const e=Object(i.a)(["\n  position: fixed;\n  bottom: 5%;\n  right: 5%;\n  z-index: 1050;\n  width: 45px;\n  height: 45px;\n  background: #eee;\n  border-radius: 50%;\n  text-align: center;\n  padding: 0;\n  display: none;\n"]);return u=function(){return e},e}function m(){window.scrollTo({top:0,left:0,behavior:"smooth"})}var d=Object(s.a)((function(e){let t=Object.assign({},e);const n=function(){const e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(()=>{function e(){window.scrollY>200?r(!0):r(!1)}return e(),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[r]),n}();return r.a.createElement("button",Object.assign({style:n?{display:"block"}:null,onClick:m},t),"TOP")}))(u());const p="https://ptx.transportdata.tw/MOTC";const E=e=>fetch(p+e,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate"}}).then(e=>e.json());function v(e){const t=e.split(":");return 60*parseInt(t[0],10)+parseInt(t[1],10)}function b(e){return e.length<2?"0"+e:e}var f=n(12),g=n.n(f),h=n(13),O=n.n(h);n(14);function T(){const e=Object(i.a)(["\n  width: 20px;\n"]);return T=function(){return e},e}function j(){const e=Object(i.a)(["\n  width: 20px;\n"]);return j=function(){return e},e}const w=Object(s.a)(e=>{let t=Object.assign({},e);return r.a.createElement("img",Object.assign({},t,{src:g.a,alt:"desc"}))})(j()),S=Object(s.a)(e=>{let t=Object.assign({},e);return r.a.createElement("img",Object.assign({},t,{src:O.a,alt:"asc"}))})(T());function k(){const e=Object(i.a)(["\n  padding: 0.3em;\n  vertical-align: middle;\n  font-weight: bold;\n  cursor: ",";\n"]);return k=function(){return e},e}function y(){const e=Object(i.a)(["\n  width: 100%;\n  box-shadow: 0px 3px 10px #ddd;\n  thead {\n    background-color: #eee;\n  }\n  td {\n    padding: 0.3em;\n    vertical-align: middle;\n  }\n  tr:nth-child(even) {\n    background-color: #eee;\n  }\n"]);return y=function(){return e},e}const x=s.a.table(y()),D=s.a.th(k(),e=>e.pointer?"pointer":"initial"),C=r.a.memo(({TrainNo:e,DepartureTime:t,ArrivalTime:n})=>{const a=v(t),o=v(n);return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-info font-weight-bold"},e),r.a.createElement("td",null,t),r.a.createElement("td",null,n),r.a.createElement("td",null,function(e){let t=0;for(;e>=60;)e-=60,t+=1;return t=b(t.toString()),t+":"+(e=b(e.toString()))}(o-a)))}),A=()=>r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},"\u5c1a\u7121\u8cc7\u6599"));var N=r.a.memo(({sortByDeparture:e,sortByArrival:t,resultList:n,onClickDepartureSort:a,onClickArrivalSort:o})=>r.a.createElement(x,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement(D,null,"\u8eca\u6b21"),r.a.createElement(D,{pointer:!0,onClick:a},"\u767c\u8eca","desc"===e?r.a.createElement(w,null):r.a.createElement(S,null)),r.a.createElement(D,{pointer:!0,onClick:o},"\u5230\u9054","desc"===t?r.a.createElement(w,null):r.a.createElement(S,null)),r.a.createElement(D,null,"\u7e3d\u6642\u7a0b"))),r.a.createElement("tbody",null,n.length>0?n.map(e=>r.a.createElement(C,{key:e.DailyTrainInfo.TrainNo,TrainNo:e.DailyTrainInfo.TrainNo,DepartureTime:e.OriginStopTime.DepartureTime,ArrivalTime:e.DestinationStopTime.ArrivalTime})):r.a.createElement(A,null))));function R(){const e=Object(i.a)(["\n  width: 100%;\n  background-color: #aeeff9;\n  th,\n  td {\n    padding: 0.3em;\n  }\n"]);return R=function(){return e},e}const F=s.a.table(R());var H=({prizeList:e,departure:t,arrival:n})=>r.a.createElement("div",{className:"mt-3 mb-3"},r.a.createElement("h3",null,"\u7968\u50f9\u8cc7\u8a0a"),r.a.createElement(F,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},t,r.a.createElement("span",{className:"ml-2 mr-2"},"\u2192"),n))),r.a.createElement("tbody",null,r.a.createElement("tr",null,e.map(e=>r.a.createElement("td",{key:e.Price},e.TicketType,":",r.a.createElement("strong",null,"$",e.Price))))))),L=n(19),W=n(16);function I({children:e}){return r.a.createElement("div",{className:"row form-group"},e)}function z({htmlFor:e,children:t}){return r.a.createElement("label",{htmlFor:e,className:"col-4 col-form-label text-left"},t)}const B=r.a.memo(({children:e})=>r.a.createElement("div",{className:"col"},e));var P=n(7);const U=r.a.memo(r.a.forwardRef((e,t)=>{let n=e.options,a=Object(P.a)(e,["options"]);return r.a.createElement("select",Object.assign({},a,{ref:t}),n.length>0?n.map(e=>r.a.createElement("option",{key:e.value,value:e.value},e.Zh_tw+e.En)):r.a.createElement("option",{value:""},"\u8acb\u9078\u64c7"))})),G=e=>{e.options;let t=Object(P.a)(e,["options"]);return r.a.createElement("select",t,r.a.createElement("option",{value:"06:00"},"06:00"),r.a.createElement("option",{value:"07:00"},"07:00"),r.a.createElement("option",{value:"08:00"},"08:00"),r.a.createElement("option",{value:"09:00"},"09:00"),r.a.createElement("option",{value:"10:00"},"10:00"),r.a.createElement("option",{value:"11:00"},"11:00"),r.a.createElement("option",{value:"12:00"},"12:00"),r.a.createElement("option",{value:"13:00"},"13:00"),r.a.createElement("option",{value:"14:00"},"14:00"),r.a.createElement("option",{value:"15:00"},"15:00"),r.a.createElement("option",{value:"16:00"},"16:00"),r.a.createElement("option",{value:"17:00"},"17:00"),r.a.createElement("option",{value:"18:00"},"18:00"),r.a.createElement("option",{value:"19:00"},"19:00"),r.a.createElement("option",{value:"20:00"},"20:00"),r.a.createElement("option",{value:"21:00"},"21:00"),r.a.createElement("option",{value:"22:00"},"22:00"),r.a.createElement("option",{value:"23:00"},"23:00"),r.a.createElement("option",{value:"24:00"},"24:00"))};var J=U;function M(){const e=Object(i.a)(["\n  box-shadow: 1px 1px 5px #ddd;\n  background-color: #f3f3f3;\n  border-color: #ddd;\n  color: #333;\n  text-shadow: 0 1px 0 #eee;\n  padding-top: 0.5em;\n  padding-bottom: 0.5em;\n  margin-bottom: 0.5em;\n  .col-form-label {\n    max-width: 7em;\n  }\n"]);return M=function(){return e},e}const Y=function(){let e=(new Date).getHours()+1,t=e+3;return e=b(e.toString())+":00",t=b(t.toString())+":00",{defaultDepTime:e,defaultArrTime:t}}(),$=Y.defaultDepTime,Z=Y.defaultArrTime;var _=Object(s.a)(({onSearch:e,departureRef:t,arrivalRef:n,className:o})=>{const l=Object(a.useState)(function(e){let t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,n,a].join("-")}(Date.now())),i=Object(c.a)(l,2),s=i[0],u=i[1],m=Object(a.useState)("1000"),d=Object(c.a)(m,2),p=d[0],v=d[1],b=Object(a.useState)("1070"),f=Object(c.a)(b,2),g=f[0],h=f[1],O=Object(a.useState)($),T=Object(c.a)(O,2),j=T[0],w=T[1],S=Object(a.useState)(Z),k=Object(c.a)(S,2),y=k[0],x=k[1],D=Object(W.a)("/v2/Rail/THSR/Station",E,{suspense:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshWhenOffline:!1,refreshWhenHidden:!1,refreshInterval:0}).data,C=D?D.map(e=>Object(L.a)({value:e.StationID},e.StationName)):[];return r.a.createElement("div",{className:"container ".concat(o)},r.a.createElement(I,null,r.a.createElement(z,{htmlFor:"trip-start"},"\u65e5\u671f"),r.a.createElement(B,null,r.a.createElement("input",{className:"form-control",type:"date",id:"trip-start",value:s,onChange:e=>u(e.currentTarget.value)}))),r.a.createElement(I,null,r.a.createElement(z,{htmlFor:"OrginStation"},"\u8d77\u7ad9"),r.a.createElement(B,null,r.a.createElement(J,{className:"form-control",name:"OrginStation",id:"OrginStation",options:C,value:p,onChange:e=>v(e.currentTarget.value),ref:t}))),r.a.createElement("div",{className:"row justify-content-center form-group"},r.a.createElement("button",{onClick:()=>{v(g),h(p)},type:"button",className:"btn btn-outline-primary"},"\u8d77\u8fc4\u7ad9\u4ea4\u63db")),r.a.createElement(I,null,r.a.createElement(z,{htmlFor:"DestinationStation"},"\u8fc4\u7ad9"),r.a.createElement(B,null,r.a.createElement(J,{className:"form-control",name:"DestinationStation",id:"DestinationStation",options:C,value:g,onChange:e=>h(e.currentTarget.value),ref:n}))),r.a.createElement(I,null,r.a.createElement(z,{htmlFor:"DepartureTime"},"\u6700\u65e9\u51fa\u767c"),r.a.createElement(B,null,r.a.createElement(G,{className:"form-control",name:"DepartureTime",id:"DepartureTime",value:j,onChange:e=>w(e.target.value)}))),r.a.createElement(I,null,r.a.createElement(z,{htmlFor:"ArriveTime"},"\u6700\u665a\u62b5\u9054"),r.a.createElement(B,null,r.a.createElement(G,{className:"form-control",name:"ArriveTime",id:"ArriveTime",value:y,onChange:e=>x(e.target.value)}))),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg btn-block",onClick:()=>e({date:s,departure:p,arrival:g,departureTime:j,arriveTime:y})},"\u67e5\u8a62"))})(M());var q=()=>{const e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],o=t[1],l=Object(a.useRef)(),i=Object(a.useRef)(),s=Object(a.useState)("desc"),u=Object(c.a)(s,2),m=u[0],d=u[1],E=Object(a.useState)("desc"),b=Object(c.a)(E,2),f=b[0],g=b[1],h=Object(a.useState)([]),O=Object(c.a)(h,2),T=O[0],j=O[1],w=Object(a.useState)([]),S=Object(c.a)(w,2),k=S[0],y=S[1],x=Object(a.useCallback)(({date:e,departure:t,arrival:n,departureTime:a,arriveTime:r})=>{(function(e,t,n){const a="/v2/Rail/THSR/DailyTimetable/OD/".concat(e,"/to/").concat(t,"/").concat(n);return fetch(p+a,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate"}})})(t,n,e).then(e=>e.json()).then(e=>{const t=v(a),n=v(r),l=e.filter(e=>{const a=v(e.OriginStopTime.DepartureTime),r=v(e.DestinationStopTime.ArrivalTime);return a>t&&r<n});j(l),o(e[0].UpdateTime)}).catch(e=>console.log(e)),function(e,t){const n="/v2/Rail/THSR/ODFare/".concat(e,"/to/").concat(t);return fetch(p+n,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate"}})}(t,n).then(e=>e.json()).then(e=>y(e[0].Fares)).catch(e=>console.log(e))},[]),D=Object(a.useCallback)(()=>{d("desc"===m?"asc":"desc"),j(T.sort((e,t)=>{const n=v(e.OriginStopTime.DepartureTime),a=v(t.OriginStopTime.DepartureTime);return"desc"===m?n-a:a-n}))},[m,T]),C=Object(a.useCallback)(()=>{g("desc"===f?"asc":"desc"),j(T.sort((e,t)=>{const n=v(e.DestinationStopTime.ArrivalTime),a=v(t.DestinationStopTime.ArrivalTime);return"desc"===f?n-a:a-n}))},[f,T]);return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,"\u9ad8\u9435\u6642\u523b\u67e5\u8a62")),r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(_,{onSearch:x,departureRef:l,arrivalRef:i})),r.a.createElement("div",{className:"container"},r.a.createElement(N,{sortByDeparture:m,sortByArrival:f,resultList:T,onClickDepartureSort:D,onClickArrivalSort:C}),k.length>0?r.a.createElement(H,{prizeList:k,departure:l.current.selectedOptions[0].textContent,arrival:i.current.selectedOptions[0].textContent}):null),r.a.createElement("footer",{className:"fixed-bottom"},r.a.createElement("p",null,"\u66f4\u65b0\u6642\u9593: ",n)))};var K=()=>r.a.createElement("div",null,"Hi TRA");function Q(){const e=Object(i.a)(["\n  label {\n    display: inline-block;\n    margin: 0 10px;\n    > input {\n      margin-right: 5px;\n    }\n  }\n"]);return Q=function(){return e},e}const V=s.a.div(Q());var X=({onChange:e})=>r.a.createElement(V,null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"transportation",value:"THSR",onChange:t=>e(t.target.value)}),"THSR"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"transportation",value:"TRA",onChange:t=>e(t.target.value)}),"TRA"));var ee=function(){const e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],o=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(X,{onChange:o}),function(e){switch(e){case"THSR":return r.a.createElement(q,null);case"TRA":return r.a.createElement(K,null);default:return null}}(n),r.a.createElement(d,null))};const te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}l.a.render(r.a.createElement(ee,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/booking",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("/booking","/service-worker.js");te?(!function(e,t){fetch(e).then(n=>{const a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):ne(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ne(t,e)})}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.b8f96f30.chunk.js.map