(this.webpackJsonpbooking=this.webpackJsonpbooking||[]).push([[0],{18:function(e,t,n){e.exports=n(30)},23:function(e,t,n){},24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(11),o=n.n(l),c=(n(23),n(1)),i=(n(24),n(2)),u=n(3);function m(){const e=Object(i.a)(["\n  position: fixed;\n  bottom: 5%;\n  right: 5%;\n  z-index: 1050;\n  width: 45px;\n  height: 45px;\n  background: #eee;\n  border-radius: 50%;\n  text-align: center;\n  padding: 0;\n  display: none;\n"]);return m=function(){return e},e}function s(){window.scrollTo({top:0,left:0,behavior:"smooth"})}var d=Object(u.a)((function(e){let t=Object.assign({},e);const n=function(){const e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(()=>{function e(){window.scrollY>200?r(!0):r(!1)}return e(),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[r]),n}();return r.a.createElement("button",Object.assign({style:n?{display:"block"}:null,onClick:s},t),"TOP")}))(m());const p=e=>fetch("https://ptx.transportdata.tw/MOTC"+e,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate"}}).then(e=>e.json());function E(e){const t=e.split(":");return 60*parseInt(t[0],10)+parseInt(t[1],10)}function v(e){return e.length<2?"0"+e:e}var b=n(4),f=n(5);function g(){const e=Object(i.a)(["\n  padding: 0.3em;\n  vertical-align: middle;\n  font-weight: bold;\n  cursor: ",";\n  > span {\n    display: inline-block;\n    margin-right: 2px;\n    vertical-align: middle;\n  }\n"]);return g=function(){return e},e}function h(){const e=Object(i.a)(["\n  width: 100%;\n  box-shadow: 0px 3px 10px #ddd;\n  thead {\n    background-color: #eee;\n  }\n  td {\n    padding: 0.3em;\n    vertical-align: middle;\n  }\n  tr:nth-child(even) {\n    background-color: #eee;\n  }\n"]);return h=function(){return e},e}const O=u.a.table(h()),T=u.a.th(g(),e=>e.pointer?"pointer":"initial"),j=r.a.memo(({TrainNo:e,DepartureTime:t,ArrivalTime:n})=>{const a=E(t),l=E(n);return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-info font-weight-bold"},e),r.a.createElement("td",null,t),r.a.createElement("td",null,n),r.a.createElement("td",null,function(e){let t=0;for(;e>=60;)e-=60,t+=1;return t=v(t.toString()),t+":"+(e=v(e.toString()))}(l-a)))}),w=()=>r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},"\u5c1a\u7121\u8cc7\u6599"));var S=({resultList:e})=>{const t=Object(a.useState)(),n=Object(c.a)(t,2),l=n[0],o=n[1],i=Object(a.useState)(),u=Object(c.a)(i,2),m=u[0],s=u[1],d=e.sort((e,t)=>{if("departure"===l){const n=E(e.OriginStopTime.DepartureTime),a=E(t.OriginStopTime.DepartureTime);return"desc"===m?a-n:n-a}if("arrival"===l){const n=E(e.DestinationStopTime.ArrivalTime),a=E(t.DestinationStopTime.ArrivalTime);return"desc"===m?a-n:n-a}return!0});function p(){return"desc"===m?r.a.createElement(f.a,null):r.a.createElement(f.b,null)}return r.a.createElement(O,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement(T,null,"\u8eca\u6b21"),r.a.createElement(T,{pointer:!0,onClick:()=>{o("departure"),s("desc"===m?"asc":"desc")}},r.a.createElement("span",null,"\u767c\u8eca"),"departure"===l?p():r.a.createElement(f.c,null)),r.a.createElement(T,{pointer:!0,onClick:()=>{o("arrival"),s("desc"===m?"asc":"desc")}},r.a.createElement("span",null,"\u5230\u9054"),"arrival"===l?p():r.a.createElement(f.c,null)),r.a.createElement(T,null,"\u7e3d\u6642\u7a0b"))),r.a.createElement("tbody",null,d.length>0?d.map(e=>r.a.createElement(j,{key:e.DailyTrainInfo.TrainNo,TrainNo:e.DailyTrainInfo.TrainNo,DepartureTime:e.OriginStopTime.DepartureTime,ArrivalTime:e.DestinationStopTime.ArrivalTime})):r.a.createElement(w,null)))};function k(){const e=Object(i.a)(["\n  width: 100%;\n  background-color: #aeeff9;\n  th,\n  td {\n    padding: 0.3em;\n  }\n"]);return k=function(){return e},e}const y=u.a.table(k());var D=({prizeList:e,departure:t,arrival:n})=>!e||e.length<1?null:r.a.createElement("div",{className:"mt-3 mb-3"},r.a.createElement("h3",null,"\u7968\u50f9\u8cc7\u8a0a"),r.a.createElement(y,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},t,r.a.createElement("span",{className:"ml-2 mr-2"},"\u2192"),n))),r.a.createElement("tbody",null,r.a.createElement("tr",null,e.map(e=>r.a.createElement("td",{key:e.Price},e.TicketType,":",r.a.createElement("strong",null,"$",e.Price))))))),x=n(17);function N({children:e}){return r.a.createElement("div",{className:"row form-group"},e)}function R({htmlFor:e,children:t}){return r.a.createElement("label",{htmlFor:e,className:"col-4 col-form-label text-left"},t)}const A=r.a.memo(({children:e})=>r.a.createElement("div",{className:"col"},e));var C=n(9);const F=r.a.memo(r.a.forwardRef((e,t)=>{let n=e.options,a=Object(C.a)(e,["options"]);return r.a.createElement("select",Object.assign({},a,{ref:t}),n.length>0?n.map(e=>r.a.createElement("option",{key:e.value,value:e.value},e.Zh_tw+e.En)):r.a.createElement("option",{value:""},"\u8acb\u9078\u64c7"))})),L=e=>{e.options;let t=Object(C.a)(e,["options"]);return r.a.createElement("select",t,r.a.createElement("option",{value:"06:00"},"06:00"),r.a.createElement("option",{value:"07:00"},"07:00"),r.a.createElement("option",{value:"08:00"},"08:00"),r.a.createElement("option",{value:"09:00"},"09:00"),r.a.createElement("option",{value:"10:00"},"10:00"),r.a.createElement("option",{value:"11:00"},"11:00"),r.a.createElement("option",{value:"12:00"},"12:00"),r.a.createElement("option",{value:"13:00"},"13:00"),r.a.createElement("option",{value:"14:00"},"14:00"),r.a.createElement("option",{value:"15:00"},"15:00"),r.a.createElement("option",{value:"16:00"},"16:00"),r.a.createElement("option",{value:"17:00"},"17:00"),r.a.createElement("option",{value:"18:00"},"18:00"),r.a.createElement("option",{value:"19:00"},"19:00"),r.a.createElement("option",{value:"20:00"},"20:00"),r.a.createElement("option",{value:"21:00"},"21:00"),r.a.createElement("option",{value:"22:00"},"22:00"),r.a.createElement("option",{value:"23:00"},"23:00"),r.a.createElement("option",{value:"24:00"},"24:00"))};var W=F;function H(){const e=Object(i.a)(["\n  box-shadow: 1px 1px 5px #ddd;\n  background-color: #f3f3f3;\n  border-color: #ddd;\n  color: #333;\n  text-shadow: 0 1px 0 #eee;\n  padding-top: 0.5em;\n  padding-bottom: 0.5em;\n  margin-bottom: 0.5em;\n  .col-form-label {\n    max-width: 7em;\n  }\n"]);return H=function(){return e},e}const I=function(){let e=(new Date).getHours()+1,t=e+3;return e=v(e.toString())+":00",t=v(t.toString())+":00",{defaultDepTime:e,defaultArrTime:t}}(),P=I.defaultDepTime,z=I.defaultArrTime;var U=Object(u.a)(({onSearch:e,departureRef:t,arrivalRef:n,className:l})=>{const o=Object(a.useState)(function(e){let t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,n,a].join("-")}(Date.now())),i=Object(c.a)(o,2),u=i[0],m=i[1],s=Object(a.useState)("1000"),d=Object(c.a)(s,2),E=d[0],v=d[1],f=Object(a.useState)("1070"),g=Object(c.a)(f,2),h=g[0],O=g[1],T=Object(a.useState)(P),j=Object(c.a)(T,2),w=j[0],S=j[1],k=Object(a.useState)(z),y=Object(c.a)(k,2),D=y[0],C=y[1],F=Object(b.a)("/v2/Rail/THSR/Station",p,{suspense:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshWhenOffline:!1,refreshWhenHidden:!1,refreshInterval:0}).data,H=F?F.map(e=>Object(x.a)({value:e.StationID},e.StationName)):[];return r.a.createElement("div",{className:"container ".concat(l)},r.a.createElement(N,null,r.a.createElement(R,{htmlFor:"trip-start"},"\u65e5\u671f"),r.a.createElement(A,null,r.a.createElement("input",{className:"form-control",type:"date",id:"trip-start",value:u,onChange:e=>m(e.currentTarget.value)}))),r.a.createElement(N,null,r.a.createElement(R,{htmlFor:"OrginStation"},"\u8d77\u7ad9"),r.a.createElement(A,null,r.a.createElement(W,{className:"form-control",name:"OrginStation",id:"OrginStation",options:H,value:E,onChange:e=>v(e.currentTarget.value),ref:t}))),r.a.createElement("div",{className:"row justify-content-center form-group"},r.a.createElement("button",{onClick:()=>{v(h),O(E)},type:"button",className:"btn btn-outline-primary"},"\u8d77\u8fc4\u7ad9\u4ea4\u63db")),r.a.createElement(N,null,r.a.createElement(R,{htmlFor:"DestinationStation"},"\u8fc4\u7ad9"),r.a.createElement(A,null,r.a.createElement(W,{className:"form-control",name:"DestinationStation",id:"DestinationStation",options:H,value:h,onChange:e=>O(e.currentTarget.value),ref:n}))),r.a.createElement(N,null,r.a.createElement(R,{htmlFor:"DepartureTime"},"\u6700\u65e9\u51fa\u767c"),r.a.createElement(A,null,r.a.createElement(L,{className:"form-control",name:"DepartureTime",id:"DepartureTime",value:w,onChange:e=>S(e.target.value)}))),r.a.createElement(N,null,r.a.createElement(R,{htmlFor:"ArriveTime"},"\u6700\u665a\u62b5\u9054"),r.a.createElement(A,null,r.a.createElement(L,{className:"form-control",name:"ArriveTime",id:"ArriveTime",value:D,onChange:e=>C(e.target.value)}))),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg btn-block",onClick:()=>e({date:u,departure:E,arrival:h,departureTime:w,arriveTime:D})},"\u67e5\u8a62"))})(H());var B=()=>{const e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useState)(""),l=Object(c.a)(n,2),o=l[0],i=l[1],u=Object(a.useState)(""),m=Object(c.a)(u,2),s=m[0],d=m[1],v=Object(a.useState)(""),f=Object(c.a)(v,2),g=f[0],h=f[1],O=Object(a.useState)(""),T=Object(c.a)(O,2),j=T[0],w=T[1],k=Object(a.useState)(""),y=Object(c.a)(k,2),x=y[0],N=y[1],R=s&&g&&o,A=Object(b.a)(()=>R&&"/v2/Rail/THSR/DailyTimetable/OD/".concat(s,"/to/").concat(g,"/").concat(o),p).data,C=Object(b.a)(()=>R&&"/v2/Rail/THSR/ODFare/".concat(s,"/to/").concat(g),p).data,F=E(j),L=E(x),W=A?A.filter(e=>{const t=E(e.OriginStopTime.DepartureTime),n=E(e.DestinationStopTime.ArrivalTime);return t>F&&n<L}):[],H=C?C[0].Fares:[],I=A&&A[0].UpdateTime;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,"\u9ad8\u9435\u6642\u523b\u67e5\u8a62")),r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(U,{onSearch:({date:e,departure:t,arrival:n,departureTime:a,arriveTime:r})=>{i(e),d(t),h(n),w(a),N(r)},departureRef:e,arrivalRef:t})),r.a.createElement("div",{className:"container"},r.a.createElement(S,{resultList:W}),H.length>0&&r.a.createElement(D,{prizeList:H,departure:e.current.selectedOptions[0].textContent,arrival:t.current.selectedOptions[0].textContent})),r.a.createElement("footer",{className:"fixed-bottom"},r.a.createElement("p",null,"\u66f4\u65b0\u6642\u9593: ",I)))};var J=()=>r.a.createElement("div",null,"Hi TRA");function M(){const e=Object(i.a)(["\n  label {\n    display: inline-block;\n    margin: 0 10px;\n    > input {\n      margin-right: 5px;\n    }\n  }\n"]);return M=function(){return e},e}const Y=u.a.div(M());var $=({onChange:e})=>r.a.createElement(Y,null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"transportation",value:"THSR",onChange:t=>e(t.target.value)}),"\u9ad8\u9435"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"transportation",value:"TRA",onChange:t=>e(t.target.value)}),"\u53f0\u9435"));var G=function(){const e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],l=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement($,{onChange:l}),function(e){switch(e){case"THSR":return r.a.createElement(B,null);case"TRA":return r.a.createElement(J,null);default:return null}}(n),r.a.createElement(d,null))};const Z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(G,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/booking",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("/booking","/service-worker.js");Z?(!function(e,t){fetch(e).then(n=>{const a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):_(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):_(t,e)})}}()}},[[18,1,2]]]);
//# sourceMappingURL=main.2c359299.chunk.js.map