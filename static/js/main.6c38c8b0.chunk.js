(this.webpackJsonpbooking=this.webpackJsonpbooking||[]).push([[0],{114:function(e,t,a){e.exports=a(127)},119:function(e,t,a){},120:function(e,t,a){},127:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),i=a.n(l),c=(a(119),a(10)),o=a(64),m=(a(120),a(203)),u=a(199),s=a(206),d=a(202),E=a(176),v=a(172),p=a(174),g=a(175),b=a(60),S=a.n(b);const h=Object(v.a)(e=>({root:{position:"fixed",bottom:e.spacing(6),right:e.spacing(2),zIndex:1200}}));var O=function(){const e=h(),t=Object(p.a)({disableHysteresis:!0,threshold:100});return r.a.createElement(g.a,{in:t},r.a.createElement("div",{onClick:e=>{const t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:e.root},r.a.createElement(E.a,{color:"secondary",size:"small","aria-label":"scroll back to top"},r.a.createElement(S.a,null))))},f=a(180),T=a(16),j=a(47),D=a.n(j),y=a(181),w=a(183),N=a(179),k=a(182),C=a(178);const I={suspense:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshWhenOffline:!1,refreshWhenHidden:!1,refreshInterval:0},A=e=>fetch("https://ptx.transportdata.tw/MOTC"+e,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate"}}).then(e=>e.json());var R=a(53);function W(e){let t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[r,a,n].join("-")}function x(e){const t=e.split(":");return 60*parseInt(t[0],10)+parseInt(t[1],10)}function B(e){return e.length<2?"0"+e:e}const F=e=>e*Math.PI/180;var _=a(82),Z=a.n(_);var P=({order:e})=>"desc"===e?r.a.createElement(Z.a,null):r.a.createElement(S.a,null);const M=()=>r.a.createElement(C.a,null,r.a.createElement(N.a,{colSpan:"4"},"\u5c1a\u7121\u8cc7\u6599"));var G=({detail:e})=>{const t=e.DailyTrainInfo.TrainNo,a=e.OriginStopTime.DepartureTime,n=e.DestinationStopTime.ArrivalTime,l=x(a),i=x(n);return r.a.createElement(C.a,null,r.a.createElement(N.a,null,r.a.createElement(f.a,{color:"primary"},t)),r.a.createElement(N.a,null,a),r.a.createElement(N.a,null,n),r.a.createElement(N.a,null,function(e){let t=0;for(;e>=60;)e-=60,t+=1;return t=B(t.toString()),t+":"+(e=B(e.toString()))}(i-l)))};var L=({departure:e,arrival:t,trainDate:a,departureTime:l,arrivalTime:i})=>{var o;const m=Object(n.useState)(),u=Object(c.a)(m,2),s=u[0],d=u[1],E=Object(n.useState)(),v=Object(c.a)(E,2),p=v[0],g=v[1],b=e&&t&&a,S=Object(T.a)(()=>b&&"/v2/Rail/THSR/DailyTimetable/OD/".concat(e,"/to/").concat(t,"/").concat(a),A,I).data,h=x(l),O=x(i),f=(S?S.filter(e=>{const t=x(e.OriginStopTime.DepartureTime),a=x(e.DestinationStopTime.ArrivalTime);return t>h&&a<O}):[]).sort((e,t)=>{if("departure"===s){const a=x(e.OriginStopTime.DepartureTime),n=x(t.OriginStopTime.DepartureTime);return"desc"===p?n-a:a-n}if("arrival"===s){const a=x(e.DestinationStopTime.ArrivalTime),n=x(t.DestinationStopTime.ArrivalTime);return"desc"===p?n-a:a-n}return!0});return r.a.createElement("div",null,r.a.createElement(y.a,null,r.a.createElement(k.a,null,r.a.createElement(C.a,null,r.a.createElement(N.a,null,"\u8eca\u6b21"),r.a.createElement(N.a,{onClick:()=>{d("departure"),g("desc"===p?"asc":"desc")}},r.a.createElement("span",null,"\u767c\u8eca"),"departure"===s?r.a.createElement(P,{order:p}):r.a.createElement(D.a,null)),r.a.createElement(N.a,{onClick:()=>{d("arrival"),g("desc"===p?"asc":"desc")}},r.a.createElement("span",null,"\u5230\u9054"),"arrival"===s?r.a.createElement(P,{order:p}):r.a.createElement(D.a,null)),r.a.createElement(N.a,null,"\u7e3d\u6642\u7a0b"))),r.a.createElement(w.a,null,f.length>0?f.map(e=>r.a.createElement(G,{key:e.DailyTrainInfo.TrainNo,detail:e})):r.a.createElement(M,null))),r.a.createElement("footer",{className:"fixed-bottom"},r.a.createElement("p",null,"\u66f4\u65b0\u6642\u9593: ",(null===S||void 0===S||null===(o=S[0])||void 0===o?void 0:o.UpdateTime)||"---")))},U=a(83);function H(){const e=Object(U.a)(["\n  width: 100%;\n  background-color: #aeeff9;\n  th,\n  td {\n    padding: 0.3em;\n  }\n"]);return H=function(){return e},e}const z=a(84).a.table(H());var J=({departure:e,arrival:t})=>{const a=e&&t,n=Object(T.a)(()=>a&&"/v2/Rail/THSR/ODFare/".concat(e,"/to/").concat(t),A,I).data,l=n?n[0].Fares:[];if(l.length<1)return null;const i=n[0].OriginStationName.Zh_tw+n[0].OriginStationName.En,c=n[0].DestinationStationName.Zh_tw+n[0].DestinationStationName.En;return r.a.createElement("div",{className:"mt-3 mb-3"},r.a.createElement("h3",null,"\u7968\u50f9\u8cc7\u8a0a"),r.a.createElement(z,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"3"},i,r.a.createElement("span",{className:"ml-2 mr-2"},"\u2192"),c))),r.a.createElement("tbody",null,r.a.createElement("tr",null,l.map(e=>r.a.createElement("td",{key:e.Price},e.TicketType,":",r.a.createElement("strong",null,"$",e.Price)))))))},$=a(211),Y=a(189),q=a(209),V=a(188),X=a(187),K=a(129),Q=a(204),ee=a(212),te=a(4);const ae=Object(te.a)({root:{textAlign:"left"}})(Q.a),ne=e=>r.a.createElement(ae,e,r.a.createElement(ee.a,{value:"06:00"},"06:00"),r.a.createElement(ee.a,{value:"07:00"},"07:00"),r.a.createElement(ee.a,{value:"08:00"},"08:00"),r.a.createElement(ee.a,{value:"09:00"},"09:00"),r.a.createElement(ee.a,{value:"10:00"},"10:00"),r.a.createElement(ee.a,{value:"11:00"},"11:00"),r.a.createElement(ee.a,{value:"12:00"},"12:00"),r.a.createElement(ee.a,{value:"13:00"},"13:00"),r.a.createElement(ee.a,{value:"14:00"},"14:00"),r.a.createElement(ee.a,{value:"15:00"},"15:00"),r.a.createElement(ee.a,{value:"16:00"},"16:00"),r.a.createElement(ee.a,{value:"17:00"},"17:00"),r.a.createElement(ee.a,{value:"18:00"},"18:00"),r.a.createElement(ee.a,{value:"19:00"},"19:00"),r.a.createElement(ee.a,{value:"20:00"},"20:00"),r.a.createElement(ee.a,{value:"21:00"},"21:00"),r.a.createElement(ee.a,{value:"22:00"},"22:00"),r.a.createElement(ee.a,{value:"23:00"},"23:00"),r.a.createElement(ee.a,{value:"24:00"},"24:00"));var re=e=>{let t=e.options,a=Object(o.a)(e,["options"]);return r.a.createElement(ae,a,t.length>0?t.map(e=>r.a.createElement(ee.a,{key:e.value,value:e.value},e.Zh_tw+e.En)):r.a.createElement(ee.a,{value:""},"\u7121\u8cc7\u6599"))};const le=function(){let e=(new Date).getHours()+1,t=e+3;return e=B(e.toString())+":00",t=B(t.toString())+":00",{defaultDepTime:e,defaultArrTime:t}}(),ie=le.defaultDepTime,ce=le.defaultArrTime;var oe=({onSearch:e,className:t})=>{const a=Object(n.useState)(()=>W(Date.now())),l=Object(c.a)(a,2),i=l[0],o=l[1],u=Object(n.useState)("1000"),s=Object(c.a)(u,2),d=s[0],E=s[1],v=Object(n.useState)("1070"),p=Object(c.a)(v,2),g=p[0],b=p[1],S=Object(n.useState)(ie),h=Object(c.a)(S,2),O=h[0],f=h[1],j=Object(n.useState)(ce),D=Object(c.a)(j,2),y=D[0],w=D[1],N=Object(T.a)("/v2/Rail/THSR/Station",A,I).data,k=N?N.map(e=>Object(R.a)({value:e.StationID},e.StationName)):[];return r.a.createElement(m.a,{my:2},r.a.createElement(K.a,null,r.a.createElement(X.a,null,r.a.createElement(V.a,{margin:"normal",fullWidth:!0},r.a.createElement($.a,{type:"date",id:"trip-start",value:i,onChange:e=>o(e.currentTarget.value),variant:"outlined",label:"\u65e5\u671f"})),r.a.createElement(V.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(q.a,{id:"OrginStation"},"\u8d77\u7ad9"),r.a.createElement(re,{label:"\u8d77\u7ad9",labelId:"OrginStation",options:k,value:d,onChange:e=>E(e.target.value)})),r.a.createElement(V.a,{margin:"normal"},r.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:()=>{E(g),b(d)}},"\u8d77\u8fc4\u7ad9\u4ea4\u63db")),r.a.createElement(V.a,{fullWidth:!0,variant:"outlined"},r.a.createElement(q.a,{id:"DestinationStation"},"\u8fc4\u7ad9"),r.a.createElement(re,{label:"\u8fc4\u7ad9",labelId:"DestinationStation",options:k,value:g,onChange:e=>b(e.target.value)})),r.a.createElement(V.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(q.a,{id:"DepartureTime"},"\u6700\u65e9\u51fa\u767c"),r.a.createElement(ne,{label:"\u6700\u65e9\u51fa\u767c",labelId:"DepartureTime",value:O,onChange:e=>f(e.target.value)})),r.a.createElement(V.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(q.a,{id:"ArrivalTime"},"\u6700\u665a\u62b5\u9054"),r.a.createElement(ne,{label:"\u6700\u665a\u62b5\u9054",labelId:"ArrivalTime",value:y,onChange:e=>w(e.target.value)})),r.a.createElement(V.a,{fullWidth:!0,margin:"normal"},r.a.createElement(Y.a,{size:"large",variant:"contained",color:"primary",onClick:()=>e({date:i,departure:d,arrival:g,departureTime:O,arrivalTime:y}),disabled:!d||!g},"\u67e5\u8a62")))))};var me=()=>{const e=Object(n.useState)(""),t=Object(c.a)(e,2),a=t[0],l=t[1],i=Object(n.useState)(""),o=Object(c.a)(i,2),m=o[0],u=o[1],s=Object(n.useState)(""),d=Object(c.a)(s,2),E=d[0],v=d[1],p=Object(n.useState)(""),g=Object(c.a)(p,2),b=g[0],S=g[1],h=Object(n.useState)(""),O=Object(c.a)(h,2),T=O[0],j=O[1];return r.a.createElement("div",null,r.a.createElement(f.a,{variant:"h3"},"\u9ad8\u9435\u6642\u523b\u67e5\u8a62"),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get stations...")},r.a.createElement(oe,{onSearch:({date:e,departure:t,arrival:a,departureTime:n,arrivalTime:r})=>{l(e),u(t),v(a),S(n),j(r)}})),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get train details...")},r.a.createElement(L,{departure:m,arrival:E,trainDate:a,departureTime:b,arrivalTime:T})),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get prize detail...")},r.a.createElement(J,{departure:m,arrival:E})))},ue=a(205),se=a(88),de=a.n(se);const Ee=e=>fetch("https://ptx.transportdata.tw/MOTC"+e,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate"}}).then(e=>e.json()),ve={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};const pe=e=>r.a.createElement(r.a.Fragment,null,e.icon&&r.a.createElement(de.a,{color:"primary",style:{marginRight:8}}),e.StationName.Zh_tw+" "+e.StationName.En);var ge=({onSearch:e})=>{const t=Object(n.useState)(()=>W(Date.now())),a=Object(c.a)(t,2),l=a[0],i=a[1],o=Object(n.useState)(null),u=Object(c.a)(o,2),s=u[0],d=u[1],E=Object(n.useState)(null),v=Object(c.a)(E,2),p=v[0],g=v[1],b=function(){const e=Object(n.useState)(null),t=Object(c.a)(e,2),a=t[0],r=t[1];function l(e){r(e.coords)}function i(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message)),r({error:e})}return Object(n.useEffect)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(l,i,ve):r({error:"You device don't support geolocation api"})},[]),a}(),S=Object(T.a)("/v2/Rail/TRA/Station?$top=500&$format=JSON",Ee,I).data,h=((e,t)=>{let a=null,n=Number.MAX_SAFE_INTEGER;return e&&t.length?(t.forEach(t=>{const r=e.latitude,l=e.longitude,i=t.StationPosition.PositionLat,c=t.StationPosition.PositionLon,o=6378137*Math.acos((m=Math.sin(F(i))*Math.sin(F(r))+Math.cos(F(i))*Math.cos(F(r))*Math.cos(F(l)-F(c)))>1?1:m<-1?-1:m);var m;o<n&&(n=o,a=t)}),Object(R.a)(Object(R.a)({},a),{},{StationName:{Zh_tw:"\u6700\u8fd1\u7684\u8eca\u7ad9: ".concat(a.StationName.Zh_tw),En:""},icon:!0,disabled:Boolean(null===e||void 0===e?void 0:e.error)})):null})(b,S),O=S?[h,...S].filter(e=>null!==e):[];return r.a.createElement(m.a,{my:2},r.a.createElement(K.a,null,r.a.createElement(X.a,null,r.a.createElement(V.a,{margin:"normal",fullWidth:!0},r.a.createElement($.a,{type:"date",id:"trip-start",value:l,onChange:e=>i(e.currentTarget.value),variant:"outlined",label:"\u65e5\u671f"})),r.a.createElement(V.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(ue.a,{name:"OrginStation",id:"OrginStation",options:O,onChange:(e,t)=>d(t),value:s,renderInput:e=>r.a.createElement($.a,Object.assign({},e,{label:"\u8d77\u7ad9",variant:"outlined"})),renderOption:pe,getOptionLabel:({StationName:e})=>e.Zh_tw+" "+e.En,getOptionSelected:(e,t)=>e.StationUID===t.StationUID,getOptionDisabled:e=>e.disabled})),r.a.createElement(V.a,{margin:"normal"},r.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:()=>{d(p),g(s)}},"\u8d77\u8fc4\u7ad9\u4ea4\u63db")),r.a.createElement(V.a,{fullWidth:!0,variant:"outlined"},r.a.createElement(ue.a,{name:"DestinationStation",id:"DestinationStation",options:O,onChange:(e,t)=>g(t),value:p,renderInput:e=>r.a.createElement($.a,Object.assign({},e,{label:"\u8fc4\u7ad9",variant:"outlined"})),renderOption:pe,getOptionLabel:e=>e.StationName.Zh_tw+" "+e.StationName.En,getOptionSelected:(e,t)=>e.StationUID===t.StationUID,getOptionDisabled:e=>e.disabled})),r.a.createElement(V.a,{fullWidth:!0,margin:"normal"},r.a.createElement(Y.a,{size:"large",variant:"contained",color:"primary",fullWidth:!0,onClick:()=>e({date:l,departure:s,arrival:p}),disabled:!s||!p},"\u67e5\u8a62")))))};var be=a(208),Se=a(201),he=a(90),Oe=a.n(he),fe=a(198),Te=a(200),je=a(190),De=a(197),ye=a(191),we=a(193),Ne=a(195),ke=a(196),Ce=a(194),Ie=a(192);var Ae=r.a.createContext({trainDate:"",departure:"",arrival:"",departureTime:"",arrivalTime:""});const Re=({station:e,isFirstStaion:t,isLastStation:a})=>{const l=Object(n.useContext)(Ae),i=l.departure,c=l.arrival,o=e.StationID===i.StationID||e.StationID===c.StationID?"secondary":t||a?"primary":void 0,m="".concat(e.StationName.Zh_tw," ").concat(e.StationName.En);return r.a.createElement(ye.a,null,r.a.createElement(Ie.a,null,r.a.createElement(f.a,{color:"textSecondary"},e.ArrivalTime)),r.a.createElement(we.a,null,r.a.createElement(Ce.a,{color:o}),r.a.createElement(Ne.a,null)),r.a.createElement(ke.a,null,r.a.createElement(f.a,null,m)))};var We=({trainNo:e})=>{const t=Object(T.a)(()=>e&&"/v2/Rail/TRA/DailyTimetable/Today/TrainNo/".concat(e),Ee,I).data,a=t?t[0].StopTimes:[];return r.a.createElement(De.a,{align:"right"},a.map((e,t)=>r.a.createElement(Re,{key:e.StationID,station:e,isFirstStaion:0===t,isLastStation:t===a.length-1})))};const xe={0:"\u4e0d\u7d93\u5c71\u6d77\u7dda",1:"\u5c71\u7dda",2:"\u6d77\u7dda"},Be={0:"\u5426",1:"\u662f"},Fe={0:"\u5426",1:"\u662f"},_e={0:"\u5426",1:"\u662f"},Ze={0:"\u5426",1:"\u662f"},Pe={0:"\u5426",1:"\u662f"},Me={0:"\u5426",1:"\u662f"},Ge={0:"\u5426",1:"\u662f"};var Le=({trainNo:e})=>{const t=Object(T.a)(()=>e&&"/v2/Rail/TRA/DailyTrainInfo/Today/TrainNo/".concat(e),Ee,I).data;if(!t)return null;const a=t[0],n="".concat(a.StartingStationName.Zh_tw," ").concat(a.StartingStationName.En),l="".concat(a.EndingStationName.Zh_tw," ").concat(a.EndingStationName.En);return r.a.createElement(m.a,{my:2},r.a.createElement(f.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u8d77\u7ad9: "),n),r.a.createElement(f.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u8a16\u7ad9: "),l),r.a.createElement(f.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u5c71\u6d77\u7dda\u985e\u578b: "),xe[a.TripLine]),r.a.createElement(f.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u8a2d\u8eab\u969c\u65c5\u5ba2\u5c08\u7528\u5ea7\u4f4d\u8eca: "),Be[a.WheelchairFlag]),r.a.createElement(f.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u63d0\u4f9b\u884c\u674e\u670d\u52d9: "),Fe[a.PackageServiceFlag]),r.a.createElement(f.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u63d0\u4f9b\u8a02\u4fbf\u7576\u670d\u52d9: "),_e[a.DiningFlag]),r.a.createElement(f.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u4eba\u8eca\u540c\u884c\u73ed\u6b21(\u7f6e\u65bc\u651c\u8eca\u888b\u4e4b\u81ea\u884c\u8eca\u5404\u7d1a\u5217\u8eca\u5747\u53ef\u4e58\u8eca): "),Ze[a.BikeFlag]),r.a.createElement(f.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u8a2d\u6709\u54fa(\u96c6)\u4e73\u5ba4\u8eca\u5ec2: "),Pe[a.BreastFeedingFlag]),r.a.createElement(f.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u6bcf\u65e5\u884c\u99db: "),Me[a.DailyFlag]),r.a.createElement(f.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u70ba\u52a0\u73ed\u8eca: "),Ge[a.ServiceAddedFlag]),r.a.createElement(f.a,{variant:"body1",gutterBottom:!0},r.a.createElement("strong",null,"\u5176\u4ed6: "),a.Note.Zh_tw," ",a.TrainTypeName.Zh_tw))};const Ue=r.a.forwardRef((function(e,t){return r.a.createElement(fe.a,Object.assign({direction:"up",ref:t},e))})),He=Object(v.a)(e=>({appBar:{position:"static"},title:{marginLeft:e.spacing(2),flex:1}}));var ze=({isOpen:e,toggle:t,trainNo:a})=>{const l=He();return r.a.createElement(be.a,{fullScreen:!0,open:e,onClose:t,TransitionComponent:Ue},r.a.createElement(u.a,{className:l.appBar},r.a.createElement(Te.a,null,r.a.createElement(je.a,{edge:"start",color:"inherit",onClick:t,"aria-label":"close"},r.a.createElement(Oe.a,null)),r.a.createElement(f.a,{variant:"h6",className:l.title},"\u8eca\u865f - ",a))),r.a.createElement(Se.a,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get train today info...")},r.a.createElement(Le,{trainNo:e&&a})),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get train time table...")},r.a.createElement(We,{trainNo:e&&a}))))};const Je=()=>r.a.createElement(C.a,null,r.a.createElement(N.a,{colSpan:"4"},"\u5c1a\u7121\u8cc7\u6599"));var $e=({detail:e})=>{const t=function(e=!1){const t=Object(n.useState)(e),a=Object(c.a)(t,2),r=a[0],l=a[1],i=Object(n.useCallback)(()=>l(!r),[r]);return[r,i]}(),a=Object(c.a)(t,2),l=a[0],i=a[1],o=e.DailyTrainInfo.TrainNo,m=e.OriginStopTime.DepartureTime,u=e.DestinationStopTime.ArrivalTime;return r.a.createElement(C.a,null,r.a.createElement(N.a,null,r.a.createElement(f.a,{color:"primary"},o)),r.a.createElement(N.a,null,m),r.a.createElement(N.a,null,u),r.a.createElement(N.a,null,r.a.createElement(Y.a,{color:"primary",onClick:i},"\u67e5\u770b"),r.a.createElement(ze,{trainNo:o,isOpen:l,toggle:i})))};var Ye=({departure:e,arrival:t,trainDate:a})=>{var l;const i=Object(n.useState)(),o=Object(c.a)(i,2),m=o[0],u=o[1],s=Object(n.useState)(),d=Object(c.a)(s,2),E=d[0],v=d[1],p=e.StationID&&t.StationID&&a,g=Object(T.a)(()=>p&&"/v2/Rail/TRA/DailyTimetable/OD/".concat(e.StationID,"/to/").concat(t.StationID,"/").concat(a,"?format=JSON"),A,I).data,b=(g||[]).sort((e,t)=>{if("departure"===m){const a=x(e.OriginStopTime.DepartureTime),n=x(t.OriginStopTime.DepartureTime);return"desc"===E?n-a:a-n}if("arrival"===m){const a=x(e.DestinationStopTime.ArrivalTime),n=x(t.DestinationStopTime.ArrivalTime);return"desc"===E?n-a:a-n}return!0});return r.a.createElement("div",null,r.a.createElement(y.a,null,r.a.createElement(k.a,null,r.a.createElement(C.a,null,r.a.createElement(N.a,null,"\u8eca\u865f"),r.a.createElement(N.a,{onClick:()=>{u("departure"),v("desc"===E?"asc":"desc")}},r.a.createElement("span",null,"\u767c\u8eca"),"departure"===m?r.a.createElement(P,{order:E}):r.a.createElement(D.a,null)),r.a.createElement(N.a,{onClick:()=>{u("arrival"),v("desc"===E?"asc":"desc")}},r.a.createElement("span",null,"\u5230\u9054"),"arrival"===m?r.a.createElement(P,{order:E}):r.a.createElement(D.a,null)),r.a.createElement(N.a,null,"\u8a73\u7d30\u8cc7\u8a0a"))),r.a.createElement(w.a,null,b.length>0?b.map(e=>r.a.createElement($e,{key:e.DailyTrainInfo.TrainNo,detail:e})):r.a.createElement(Je,null))),r.a.createElement("footer",{className:"fixed-bottom"},r.a.createElement("p",null,"\u66f4\u65b0\u6642\u9593: ",(null===g||void 0===g||null===(l=g[0])||void 0===l?void 0:l.UpdateTime)||"---")))};var qe=()=>{const e=Object(n.useState)(""),t=Object(c.a)(e,2),a=t[0],l=t[1],i=Object(n.useState)(""),o=Object(c.a)(i,2),m=o[0],u=o[1],s=Object(n.useState)(""),d=Object(c.a)(s,2),E=d[0],v=d[1];return r.a.createElement("div",null,r.a.createElement(f.a,{variant:"h3"},"\u53f0\u9435\u6642\u523b\u67e5\u8a62"),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get stations...")},r.a.createElement(ge,{onSearch:({date:e,departure:t,arrival:a})=>{l(e),u(t),v(a)}})),r.a.createElement(Ae.Provider,{value:{trainDate:a,departure:m,arrival:E}},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get train details...")},r.a.createElement(Ye,{departure:m,arrival:E,trainDate:a}))))};function Ve(e){const t=e.children,a=e.value,n=e.index,l=Object(o.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},l),a===n&&r.a.createElement(m.a,{pt:2},t))}function Xe(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var Ke=function(){const e=Object(n.useState)(0),t=Object(c.a)(e,2),a=t[0],l=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{position:"static",id:"back-to-top-anchor"},r.a.createElement(s.a,{value:a,onChange:(e,t)=>{l(t)},"aria-label":"App tabs"},r.a.createElement(d.a,Object.assign({label:"THSR"},Xe(0))),r.a.createElement(d.a,Object.assign({label:"TRA"},Xe(1))))),r.a.createElement(Ve,{value:a,index:0},r.a.createElement(me,null)),r.a.createElement(Ve,{value:a,index:1},r.a.createElement(qe,null)),r.a.createElement(O,null))};const Qe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function et(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(Ke,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/booking",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("/booking","/service-worker.js");Qe?(!function(e,t){fetch(e).then(a=>{const n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):et(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):et(t,e)})}}()}},[[114,1,2]]]);
//# sourceMappingURL=main.6c38c8b0.chunk.js.map