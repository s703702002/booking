(this.webpackJsonpbooking=this.webpackJsonpbooking||[]).push([[0],{141:function(e,t,a){e.exports=a(153)},146:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),i=(a(146),a(8)),c=a(233),o=a(234),u=a(218),m=a(155),s=a(236),d=a(223),E=a(113),v=a.n(E),b=a(115),f=a.n(b),p=a(114),g=a.n(p),O=a(244),h=a(198),S=a(116),j=a(237),T=a(238),y=a(202),D=a(200),k=a(201),w=a(70),C=a.n(w),I=Object(h.a)((function(e){return{root:{position:"fixed",bottom:e.spacing(4),right:e.spacing(2),zIndex:1200}}}));var N=function(){var e=I(),t=Object(D.a)({disableHysteresis:!0,threshold:100});return n.createElement(k.a,{in:t},n.createElement("div",{onClick:function(){var e=document.querySelector("#back-to-top-anchor");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:e.root},n.createElement(y.a,{color:"secondary",size:"small","aria-label":"scroll back to top"},n.createElement(C.a,null))))},A=a(77),x=a(240),R=a(98),W=a(99),B=a(119),F=a(117),M=function(e){Object(B.a)(a,e);var t=Object(F.a)(a);function a(e){var n;return Object(R.a)(this,a),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object(W.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?r.a.createElement("div",null,this.props.fallback||r.a.createElement("h2",null,"Something went wrong."),r.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),r.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}]),a}(r.a.Component),H=a(21),_=a(206),Z=a(207),P=a(208),z=a(209),L=a(210),G=a(54),U=a.n(G),J=a(211),$=a(213),V=a(205),q=a(212),K=a(204),X=function(e){return fetch("https://ptx.transportdata.tw/MOTC"+e,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate"}}).then((function(e){return e.json()}))},Y={suspense:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshWhenOffline:!1,refreshWhenHidden:!1,refreshInterval:0},Q=a(101),ee=a.n(Q),te=function(e){return"desc"===e.order?n.createElement(ee.a,null):n.createElement(C.a,null)},ae=a(102);function ne(){var e=Object(ae.a)(["\n  width: 100vw;\n  position: fixed;\n  bottom: 0;\n  background-color: #424242;\n  color: #fff;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return ne=function(){return e},e}var re=a(103).a.footer(ne()),le=a(250),ie=function(){return r.a.createElement(K.a,null,r.a.createElement(V.a,{colSpan:"4"},"\u5c1a\u7121\u8cc7\u6599"))},ce=function(e){var t=e.detail,a=e.trainDate,n=t.DailyTrainInfo.TrainNo,l=t.OriginStopTime.DepartureTime,i=t.DestinationStopTime.ArrivalTime,c=Object(_.a)("".concat(a," ").concat(l)),o=Object(_.a)("".concat(a," ").concat(i));return r.a.createElement(K.a,null,r.a.createElement(V.a,null,r.a.createElement(A.a,{color:"primary"},n)),r.a.createElement(V.a,null,l),r.a.createElement(V.a,null,i),r.a.createElement(V.a,null,Object(le.a)(o,c)," \u5206"))},oe=n.useState,ue=function(e){var t,a=e.departure,r=e.arrival,l=e.trainDate,c=e.departureTime,o=e.arrivalTime,u=oe("departure"),m=Object(i.a)(u,2),s=m[0],d=m[1],E=oe("desc"),v=Object(i.a)(E,2),b=v[0],f=v[1],p=a&&r&&l,g=Object(H.a)((function(){return p&&"/v2/Rail/THSR/DailyTimetable/OD/".concat(a,"/to/").concat(r,"/").concat(l)}),X,Y).data,O=Object(_.a)("".concat(l," ").concat(c)),h=Object(_.a)("".concat(l," ").concat(o)),S=(g?g.filter((function(e){var t=Object(_.a)("".concat(l," ").concat(e.OriginStopTime.DepartureTime)),a=Object(_.a)("".concat(l," ").concat(e.DestinationStopTime.ArrivalTime));return Object(Z.a)(t,O)&&Object(P.a)(a,h)})):[]).sort((function(e,t){if("departure"===s){var a=Object(_.a)("".concat(l," ").concat(e.OriginStopTime.DepartureTime)),n=Object(_.a)("".concat(l," ").concat(t.OriginStopTime.DepartureTime));return"desc"===b?Object(z.a)(a,n):Object(L.a)(a,n)}var r=Object(_.a)("".concat(l," ").concat(e.DestinationStopTime.ArrivalTime)),i=Object(_.a)("".concat(l," ").concat(t.DestinationStopTime.ArrivalTime));return"desc"===b?Object(z.a)(r,i):Object(L.a)(r,i)})),j=(null===g||void 0===g||null===(t=g[0])||void 0===t?void 0:t.UpdateTime)||"---";return n.createElement(n.Fragment,null,n.createElement(J.a,null,n.createElement(q.a,null,n.createElement(K.a,null,n.createElement(V.a,null,"\u8eca\u6b21"),n.createElement(V.a,{onClick:function(){d("departure"),f("desc"===b?"asc":"desc")}},"\u767c\u8eca","departure"===s?n.createElement(te,{order:b}):n.createElement(U.a,null)),n.createElement(V.a,{onClick:function(){d("arrival"),f("desc"===b?"asc":"desc")}},"\u5230\u9054","arrival"===s?n.createElement(te,{order:b}):n.createElement(U.a,null)),n.createElement(V.a,null,"\u7e3d\u6642\u7a0b"))),n.createElement($.a,null,S.length>0?S.map((function(e){return n.createElement(ce,{key:e.DailyTrainInfo.TrainNo,detail:e,trainDate:l})})):n.createElement(ie,null))),n.createElement(re,null,n.createElement(A.a,null,"\u66f4\u65b0\u6642\u9593: ",j)))},me=a(4),se=a(107),de=a.n(se),Ee=a(214),ve=a(122),be=Object(me.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(V.a),fe=function(e){var t,a=e.departure,n=e.arrival,l=a&&n,i=Object(H.a)((function(){return l&&"/v2/Rail/THSR/ODFare/".concat(a,"/to/").concat(n)}),X,Y).data,c=(null===i||void 0===i||null===(t=i[0])||void 0===t?void 0:t.Fares)||[];if(c.length<1)return null;var o=i[0].OriginStationName.Zh_tw+i[0].OriginStationName.En,u=i[0].DestinationStationName.Zh_tw+i[0].DestinationStationName.En;return r.a.createElement(x.a,{mt:2},r.a.createElement(x.a,{mb:1},r.a.createElement(A.a,{align:"center",variant:"h4"},"\u7968\u50f9\u8cc7\u8a0a")),r.a.createElement(Ee.a,{component:ve.a},r.a.createElement(J.a,null,r.a.createElement(q.a,null,r.a.createElement(K.a,null,r.a.createElement(be,{colSpan:"3"},o,"\xa0",r.a.createElement(de.a,null),"\xa0",u))),r.a.createElement($.a,null,r.a.createElement(K.a,null,c.map((function(e){return r.a.createElement(V.a,{key:e.Price},e.TicketType,": ",r.a.createElement("strong",null,e.Price)," \u5143")})))))))},pe=a(58),ge=a(239),Oe=a(245),he=a(249),Se=a(222),je=a(248),Te=a(221),ye=a(220),De=a(76),ke=a(242),we=a(219),Ce=function(e){return r.a.createElement(ke.a,e,r.a.createElement(we.a,{value:"06:00"},"06:00"),r.a.createElement(we.a,{value:"07:00"},"07:00"),r.a.createElement(we.a,{value:"08:00"},"08:00"),r.a.createElement(we.a,{value:"09:00"},"09:00"),r.a.createElement(we.a,{value:"10:00"},"10:00"),r.a.createElement(we.a,{value:"11:00"},"11:00"),r.a.createElement(we.a,{value:"12:00"},"12:00"),r.a.createElement(we.a,{value:"13:00"},"13:00"),r.a.createElement(we.a,{value:"14:00"},"14:00"),r.a.createElement(we.a,{value:"15:00"},"15:00"),r.a.createElement(we.a,{value:"16:00"},"16:00"),r.a.createElement(we.a,{value:"17:00"},"17:00"),r.a.createElement(we.a,{value:"18:00"},"18:00"),r.a.createElement(we.a,{value:"19:00"},"19:00"),r.a.createElement(we.a,{value:"20:00"},"20:00"),r.a.createElement(we.a,{value:"21:00"},"21:00"),r.a.createElement(we.a,{value:"22:00"},"22:00"),r.a.createElement(we.a,{value:"23:00"},"23:00"),r.a.createElement(we.a,{value:"24:00"},"24:00"))},Ie=function(e){var t=e.options,a=Object(De.a)(e,["options"]);return r.a.createElement(ke.a,a,t.length>0?t.map((function(e){return r.a.createElement(we.a,{key:e.value,value:e.value},e.Zh_tw+e.En)})):r.a.createElement(we.a,{value:""},"\u7121\u8cc7\u6599"))},Ne=function(e){var t=e.onSearch,a=(e.className,Object(n.useState)(Object(ge.a)(Date.now(),"yyyy-MM-dd"))),l=Object(i.a)(a,2),c=l[0],o=l[1],u=Object(n.useState)("1000"),m=Object(i.a)(u,2),s=m[0],d=m[1],E=Object(n.useState)("1070"),v=Object(i.a)(E,2),b=v[0],f=v[1],p=Object(n.useState)(Object(ge.a)(Date.now(),"HH:00")),g=Object(i.a)(p,2),O=g[0],h=g[1],S=Object(n.useState)(Object(ge.a)(Object(Oe.a)(Date.now(),{hours:3}),"HH:00")),j=Object(i.a)(S,2),T=j[0],y=j[1],D=Object(H.a)("/v2/Rail/THSR/Station",X,Y).data,k=D?D.map((function(e){return Object(pe.a)({value:e.StationID},e.StationName)})):[];return r.a.createElement(x.a,{my:2},r.a.createElement(ve.a,null,r.a.createElement(ye.a,null,r.a.createElement(Te.a,{margin:"normal",fullWidth:!0},r.a.createElement(he.a,{type:"date",id:"trip-start",value:c,onChange:function(e){return o(e.currentTarget.value)},variant:"outlined",label:"\u65e5\u671f"})),r.a.createElement(Te.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(je.a,{id:"OrginStation"},"\u8d77\u7ad9"),r.a.createElement(Ie,{label:"\u8d77\u7ad9",labelId:"OrginStation",options:k,value:s,onChange:function(e){return d(e.target.value)}})),r.a.createElement(Te.a,{margin:"normal",fullWidth:!0},r.a.createElement(Se.a,{style:{width:150,margin:"0 auto"},size:"small",variant:"contained",color:"primary",onClick:function(){d(b),f(s)}},"\u8d77\u8fc4\u7ad9\u4ea4\u63db")),r.a.createElement(Te.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(je.a,{id:"DestinationStation"},"\u8fc4\u7ad9"),r.a.createElement(Ie,{label:"\u8fc4\u7ad9",labelId:"DestinationStation",options:k,value:b,onChange:function(e){return f(e.target.value)}})),r.a.createElement(Te.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(je.a,{id:"DepartureTime"},"\u6700\u65e9\u51fa\u767c"),r.a.createElement(Ce,{label:"\u6700\u65e9\u51fa\u767c",labelId:"DepartureTime",value:O,onChange:function(e){return h(e.target.value)}})),r.a.createElement(Te.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(je.a,{id:"ArrivalTime"},"\u6700\u665a\u62b5\u9054"),r.a.createElement(Ce,{label:"\u6700\u665a\u62b5\u9054",labelId:"ArrivalTime",value:T,onChange:function(e){return y(e.target.value)}})),r.a.createElement(Te.a,{fullWidth:!0,margin:"normal"},r.a.createElement(Se.a,{size:"large",variant:"contained",color:"primary",onClick:function(){return t({date:c,departure:s,arrival:b,departureTime:O,arrivalTime:T})},disabled:!s||!b},"\u67e5\u8a62")))))},Ae=r.a.createElement(A.a,{align:"center",variant:"h6",color:"error"},"\u5f88\u62b1\u6b49\uff0c\u7cfb\u7d71\u5fd9\u788c\u4e2d"),xe=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),o=Object(i.a)(c,2),u=o[0],m=o[1],s=Object(n.useState)(""),d=Object(i.a)(s,2),E=d[0],v=d[1],b=Object(n.useState)(""),f=Object(i.a)(b,2),p=f[0],g=f[1],O=Object(n.useState)(""),h=Object(i.a)(O,2),S=h[0],j=h[1];return r.a.createElement(x.a,{paddingBottom:8},r.a.createElement(A.a,{align:"center",variant:"h3"},"\u9ad8\u9435\u6642\u523b\u67e5\u8a62"),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get stations...")},r.a.createElement(Ne,{onSearch:function(e){var t=e.date,a=e.departure,n=e.arrival,r=e.departureTime,i=e.arrivalTime;l(t),m(a),v(n),g(r),j(i)}})),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get train details...")},r.a.createElement(ue,{departure:u,arrival:E,trainDate:a,departureTime:p,arrivalTime:S})),r.a.createElement(M,{fallback:Ae},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get prize detail...")},r.a.createElement(fe,{departure:u,arrival:E}))))},Re=a(118),We=a(241),Be=a(111),Fe=a.n(Be),Me=function(e){return e*Math.PI/180},He={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};var _e=a(243),Ze=a(108),Pe=a.n(Ze),ze=a(109),Le=a.n(ze),Ge=r.a.createElement(Pe.a,{fontSize:"small"}),Ue=r.a.createElement(Le.a,{fontSize:"small"}),Je=[{text:"\u4e0d\u9650",value:"0"},{text:"\u592a\u9b6f\u95a3",value:"1"},{text:"\u666e\u60a0\u746a",value:"2"},{text:"\u81ea\u5f37",value:"3"},{text:"\u8392\u5149",value:"4"},{text:"\u5fa9\u8208",value:"5"},{text:"\u5340\u9593",value:"6"},{text:"\u666e\u5feb",value:"7"}],$e=function(e){return r.a.createElement(We.a,Object.assign({multiple:!0,options:Je,disableCloseOnSelect:!0,getOptionLabel:function(e){return e.text},defaultValue:[Je[0]],limitTags:2,renderOption:function(e,t){var a=t.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_e.a,{icon:Ge,checkedIcon:Ue,style:{marginRight:8},checked:a}),e.text)},renderInput:function(e){return r.a.createElement(he.a,Object.assign({},e,{variant:"outlined",label:"\u5217\u8eca\u7a2e\u985e"}))}},e))},Ve=function(e){return r.a.createElement(r.a.Fragment,null,e.icon&&r.a.createElement(Fe.a,{color:"primary",style:{marginRight:8}}),e.StationName.Zh_tw+" "+e.StationName.En)},qe=function(e){var t=e.onSearch,a=Object(n.useState)(Object(ge.a)(Date.now(),"yyyy-MM-dd")),l=Object(i.a)(a,2),c=l[0],o=l[1],u=Object(n.useState)(null),m=Object(i.a)(u,2),s=m[0],d=m[1],E=Object(n.useState)(null),v=Object(i.a)(E,2),b=v[0],f=v[1],p=Object(n.useState)(Object(ge.a)(Date.now(),"HH:00")),g=Object(i.a)(p,2),O=g[0],h=g[1],S=Object(n.useState)(Object(ge.a)(Object(Oe.a)(Date.now(),{hours:3}),"HH:00")),j=Object(i.a)(S,2),T=j[0],y=j[1],D=Object(n.useState)([{text:"\u4e0d\u9650",value:"0"}]),k=Object(i.a)(D,2),w=k[0],C=k[1],I=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1];function l(e){r(e.coords)}function c(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message)),r({error:e})}return Object(n.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(l,c,He):r({error:"You device don't support geolocation api"})}),[]),a}(),N=Object(H.a)("/v2/Rail/TRA/Station?$top=500&$format=JSON",X,Y).data,A=N?N.filter((function(e){return"1001"!==e.StationID})):[],R=function(e,t){var a=null,n=Number.MAX_SAFE_INTEGER;return e&&!e.error&&t.length?(t.forEach((function(t){var r,l=e.latitude,i=e.longitude,c=t.StationPosition.PositionLat,o=t.StationPosition.PositionLon,u=6378137*Math.acos((r=Math.sin(Me(c))*Math.sin(Me(l))+Math.cos(Me(c))*Math.cos(Me(l))*Math.cos(Me(i)-Me(o)))>1?1:r<-1?-1:r);u<n&&(n=u,a=t)})),Object(pe.a)(Object(pe.a)({},a),{},{StationName:{Zh_tw:"\u6700\u8fd1\u7684\u8eca\u7ad9: ".concat(a.StationName.Zh_tw),En:""},icon:!0,disabled:Boolean(null===e||void 0===e?void 0:e.error)})):null}(I,A),W=A?[R].concat(Object(Re.a)(A)).filter((function(e){return null!==e})):[];return r.a.createElement(x.a,{my:2},r.a.createElement(ve.a,null,r.a.createElement(ye.a,null,r.a.createElement(Te.a,{margin:"normal",fullWidth:!0},r.a.createElement(he.a,{type:"date",id:"trip-start",value:c,onChange:function(e){return o(e.currentTarget.value)},variant:"outlined",label:"\u65e5\u671f"})),r.a.createElement(Te.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(We.a,{name:"OrginStation",id:"OrginStation",options:W,onChange:function(e,t){return d(t)},value:s,renderInput:function(e){return r.a.createElement(he.a,Object.assign({},e,{label:"\u8d77\u7ad9",variant:"outlined"}))},renderOption:Ve,getOptionLabel:function(e){var t=e.StationName;return t.Zh_tw+" "+t.En},getOptionSelected:function(e,t){return e.StationUID===t.StationUID},getOptionDisabled:function(e){return e.disabled}})),r.a.createElement(Te.a,{margin:"normal",fullWidth:!0},r.a.createElement(Se.a,{style:{width:150,margin:"0 auto"},size:"small",variant:"contained",color:"primary",onClick:function(){d(b),f(s)}},"\u8d77\u8fc4\u7ad9\u4ea4\u63db")),r.a.createElement(Te.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(We.a,{name:"DestinationStation",id:"DestinationStation",options:W,onChange:function(e,t){return f(t)},value:b,renderInput:function(e){return r.a.createElement(he.a,Object.assign({},e,{label:"\u8fc4\u7ad9",variant:"outlined"}))},renderOption:Ve,getOptionLabel:function(e){return e.StationName.Zh_tw+" "+e.StationName.En},getOptionSelected:function(e,t){return e.StationUID===t.StationUID},getOptionDisabled:function(e){return e.disabled}})),r.a.createElement(Te.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(je.a,{id:"DepartureTime"},"\u6700\u65e9\u51fa\u767c"),r.a.createElement(Ce,{label:"\u6700\u65e9\u51fa\u767c",labelId:"DepartureTime",value:O,onChange:function(e){return h(e.target.value)}})),r.a.createElement(Te.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement(je.a,{id:"ArrivalTime"},"\u6700\u665a\u62b5\u9054"),r.a.createElement(Ce,{label:"\u6700\u665a\u62b5\u9054",labelId:"ArrivalTime",value:T,onChange:function(e){return y(e.target.value)}})),r.a.createElement(Te.a,{margin:"normal",fullWidth:!0,variant:"outlined"},r.a.createElement($e,{name:"trainType",id:"trainType",onChange:function(e,t){return C(t)}})),r.a.createElement(Te.a,{fullWidth:!0,margin:"normal"},r.a.createElement(Se.a,{size:"large",variant:"contained",color:"primary",fullWidth:!0,onClick:function(){return t({date:c,departure:s,arrival:b,departureTime:O,arrivalTime:T,trainType:w})},disabled:!s||!b||w.length<1},"\u67e5\u8a62")))))},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.useState)(e),a=Object(i.a)(t,2),r=a[0],l=a[1],c=Object(n.useCallback)((function(){return l(!r)}),[r]);return[r,c]},Xe=a(232),Ye=a(235),Qe=a(112),et=a.n(Qe),tt=a(231),at=a(230),nt=a(224),rt=a(226),lt=a(228),it=a(229),ct=a(227),ot=a(225),ut=r.a.createContext({trainDate:"",departure:"",arrival:"",departureTime:"",arrivalTime:""}),mt=function(e){var t=e.station,a=e.isFirstStaion,l=e.isLastStation,i=Object(n.useContext)(ut),c=i.departure,o=i.arrival,u=t.StationID===c.StationID||t.StationID===o.StationID?"secondary":a||l?"primary":void 0,m="".concat(t.StationName.Zh_tw," ").concat(t.StationName.En);return r.a.createElement(nt.a,null,r.a.createElement(ot.a,null,r.a.createElement(A.a,{color:"textSecondary"},t.ArrivalTime)),r.a.createElement(rt.a,null,r.a.createElement(ct.a,{color:u}),r.a.createElement(lt.a,null)),r.a.createElement(it.a,null,r.a.createElement(A.a,null,m)))},st=function(e){var t=e.trainNo,a=Object(H.a)((function(){return t&&"/v2/Rail/TRA/DailyTimetable/Today/TrainNo/".concat(t)}),X,Y).data,n=a?a[0].StopTimes:[];return r.a.createElement(at.a,{align:"right"},n.map((function(e,t){return r.a.createElement(mt,{key:e.StationID,station:e,isFirstStaion:0===t,isLastStation:t===n.length-1})})))},dt={0:"\u4e0d\u7d93\u5c71\u6d77\u7dda",1:"\u5c71\u7dda",2:"\u6d77\u7dda"},Et={0:"\u5426",1:"\u662f"},vt={0:"\u5426",1:"\u662f"},bt={0:"\u5426",1:"\u662f"},ft={0:"\u5426",1:"\u662f"},pt={0:"\u5426",1:"\u662f"},gt={0:"\u5426",1:"\u662f"},Ot={0:"\u5426",1:"\u662f"},ht=function(e){var t=e.trainNo,a=Object(H.a)((function(){return t&&"/v2/Rail/TRA/DailyTrainInfo/Today/TrainNo/".concat(t)}),X,Y).data;if(!a)return null;var n=a[0],l="".concat(n.StartingStationName.Zh_tw," ").concat(n.StartingStationName.En),i="".concat(n.EndingStationName.Zh_tw," ").concat(n.EndingStationName.En);return r.a.createElement(x.a,{my:2},r.a.createElement(A.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u8d77\u7ad9: "),l),r.a.createElement(A.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u8a16\u7ad9: "),i),r.a.createElement(A.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u5c71\u6d77\u7dda\u985e\u578b: "),dt[n.TripLine]),r.a.createElement(A.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u8a2d\u8eab\u969c\u65c5\u5ba2\u5c08\u7528\u5ea7\u4f4d\u8eca: "),Et[n.WheelchairFlag]),r.a.createElement(A.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u63d0\u4f9b\u884c\u674e\u670d\u52d9: "),vt[n.PackageServiceFlag]),r.a.createElement(A.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u63d0\u4f9b\u8a02\u4fbf\u7576\u670d\u52d9: "),bt[n.DiningFlag]),r.a.createElement(A.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u4eba\u8eca\u540c\u884c\u73ed\u6b21(\u7f6e\u65bc\u651c\u8eca\u888b\u4e4b\u81ea\u884c\u8eca\u5404\u7d1a\u5217\u8eca\u5747\u53ef\u4e58\u8eca): "),ft[n.BikeFlag]),r.a.createElement(A.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u8a2d\u6709\u54fa(\u96c6)\u4e73\u5ba4\u8eca\u5ec2: "),pt[n.BreastFeedingFlag]),r.a.createElement(A.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u6bcf\u65e5\u884c\u99db: "),gt[n.DailyFlag]),r.a.createElement(A.a,{variant:"subtitle1",gutterBottom:!0},r.a.createElement("strong",null,"\u662f\u5426\u70ba\u52a0\u73ed\u8eca: "),Ot[n.ServiceAddedFlag]),r.a.createElement(A.a,{variant:"body1",gutterBottom:!0},r.a.createElement("strong",null,"\u5176\u4ed6: "),n.Note.Zh_tw," ",n.TrainTypeName.Zh_tw))},St=r.a.forwardRef((function(e,t){return r.a.createElement(tt.a,Object.assign({direction:"up",ref:t},e))})),jt=Object(h.a)((function(e){return{appBar:{position:"static"},title:{marginLeft:e.spacing(2),flex:1}}})),Tt=function(e){var t=e.isOpen,a=e.toggle,l=e.trainNo,i=jt();return r.a.createElement(Xe.a,{fullScreen:!0,open:t,onClose:a,TransitionComponent:St},r.a.createElement(c.a,{className:i.appBar},r.a.createElement(o.a,null,r.a.createElement(d.a,{edge:"start",color:"inherit",onClick:a,"aria-label":"close"},r.a.createElement(et.a,null)),r.a.createElement(A.a,{variant:"h6",className:i.title},"\u8eca\u865f - ",l))),r.a.createElement(Ye.a,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get train today info...")},r.a.createElement(ht,{trainNo:t&&l})),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get train time table...")},r.a.createElement(st,{trainNo:t&&l}))))},yt=function(){return r.a.createElement(K.a,null,r.a.createElement(V.a,{colSpan:"4"},"\u5c1a\u7121\u8cc7\u6599"))},Dt=function(e){var t=e.detail,a=Ke(),n=Object(i.a)(a,2),l=n[0],c=n[1],o=t.DailyTrainInfo.TrainNo,u=t.OriginStopTime.DepartureTime,m=t.DestinationStopTime.ArrivalTime;return r.a.createElement(K.a,null,r.a.createElement(V.a,null,r.a.createElement(A.a,{color:"primary"},o)),r.a.createElement(V.a,null,u),r.a.createElement(V.a,null,m),r.a.createElement(V.a,null,r.a.createElement(Se.a,{color:"primary",onClick:c},"\u67e5\u770b"),r.a.createElement(Tt,{trainNo:o,isOpen:l,toggle:c})))},kt=function(e){var t,a=e.departure,l=e.arrival,c=e.trainDate,o=e.departureTime,u=e.arrivalTime,m=e.trainType,s=Object(n.useState)(),d=Object(i.a)(s,2),E=d[0],v=d[1],b=Object(n.useState)(),f=Object(i.a)(b,2),p=f[0],g=f[1],O=a.StationID&&l.StationID&&c,h=Object(H.a)((function(){return O&&"/v2/Rail/TRA/DailyTimetable/OD/".concat(a.StationID,"/to/").concat(l.StationID,"/").concat(c,"?format=JSON")}),X,Y).data,S=Object(_.a)("".concat(c," ").concat(o)),j=Object(_.a)("".concat(c," ").concat(u)),T=m.map((function(e){return e.value})),y=!T.includes("0"),D=(h?h.filter((function(e){var t=Object(_.a)("".concat(c," ").concat(e.OriginStopTime.DepartureTime)),a=Object(_.a)("".concat(c," ").concat(e.DestinationStopTime.ArrivalTime));return Object(Z.a)(t,S)&&Object(P.a)(a,j)})).filter((function(e){return!y||T.includes(e.DailyTrainInfo.TrainTypeCode)})):[]).sort((function(e,t){if("departure"===E){var a=Object(_.a)("".concat(c," ").concat(e.OriginStopTime.DepartureTime)),n=Object(_.a)("".concat(c," ").concat(t.OriginStopTime.DepartureTime));return"desc"===p?Object(z.a)(a,n):Object(L.a)(a,n)}if("arrival"===E){var r=Object(_.a)("".concat(c," ").concat(e.DestinationStopTime.ArrivalTime)),l=Object(_.a)("".concat(c," ").concat(t.DestinationStopTime.ArrivalTime));return"desc"===p?Object(z.a)(r,l):Object(L.a)(r,l)}return!0}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,null,r.a.createElement(q.a,null,r.a.createElement(K.a,null,r.a.createElement(V.a,null,"\u8eca\u865f"),r.a.createElement(V.a,{onClick:function(){v("departure"),g("desc"===p?"asc":"desc")}},"\u767c\u8eca","departure"===E?r.a.createElement(te,{order:p}):r.a.createElement(U.a,null)),r.a.createElement(V.a,{onClick:function(){v("arrival"),g("desc"===p?"asc":"desc")}},"\u5230\u9054","arrival"===E?r.a.createElement(te,{order:p}):r.a.createElement(U.a,null)),r.a.createElement(V.a,null,"\u8a73\u7d30\u8cc7\u8a0a"))),r.a.createElement($.a,null,D.length>0?D.map((function(e){return r.a.createElement(Dt,{key:e.DailyTrainInfo.TrainNo,detail:e})})):r.a.createElement(yt,null))),r.a.createElement(re,null,r.a.createElement(A.a,null,"\u66f4\u65b0\u6642\u9593: ",(null===h||void 0===h||null===(t=h[0])||void 0===t?void 0:t.UpdateTime)||"---")))},wt=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),o=Object(i.a)(c,2),u=o[0],m=o[1],s=Object(n.useState)(""),d=Object(i.a)(s,2),E=d[0],v=d[1],b=Object(n.useState)(""),f=Object(i.a)(b,2),p=f[0],g=f[1],O=Object(n.useState)(""),h=Object(i.a)(O,2),S=h[0],j=h[1],T=Object(n.useState)([]),y=Object(i.a)(T,2),D=y[0],k=y[1];return r.a.createElement(x.a,{paddingBottom:8},r.a.createElement(A.a,{align:"center",variant:"h3"},"\u53f0\u9435\u6642\u523b\u67e5\u8a62"),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get stations...")},r.a.createElement(qe,{onSearch:function(e){var t=e.date,a=e.departure,n=e.arrival,r=e.departureTime,i=e.arrivalTime,c=e.trainType;l(t),m(a),v(n),g(r),j(i),k(c)}})),r.a.createElement(ut.Provider,{value:{trainDate:a,departure:u,arrival:E}},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Get train details...")},r.a.createElement(kt,{departure:u,arrival:E,trainDate:a,departureTime:p,arrivalTime:S,trainType:D}))))};var Ct=function(e){var t=e.children,a=e.value,r=e.index,l=Object(De.a)(e,["children","value","index"]);return n.createElement("div",Object.assign({role:"tabpanel",hidden:a!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},l),a===r&&n.createElement(x.a,{pt:2},t))},It=n.useState,Nt=n.useMemo,At=Object(h.a)({list:{width:150}}),xt=function(e){var t=e.toggleDrawer,a=e.onItemClick,r=At();return n.createElement("div",{className:r.list,role:"presentation",onClick:function(){return t()},onKeyDown:function(){return t()}},n.createElement(u.a,null,n.createElement(m.a,{button:!0,onClick:function(){return a(0)}},n.createElement(s.a,{primary:"THSR"})),n.createElement(m.a,{button:!0,onClick:function(){return a(1)}},n.createElement(s.a,{primary:"TRA"}))))};var Rt=function(){var e=It(0),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Ke(),u=Object(i.a)(l,2),m=u[0],s=u[1],E=Ke(),b=Object(i.a)(E,2),p=b[0],h=b[1],y=Nt((function(){return Object(S.a)({palette:{type:m?"dark":"light"},overrides:{MuiSvgIcon:{root:{verticalAlign:"middle"}}}})}),[m]);return n.createElement(j.a,{theme:y},n.createElement(T.a,null),n.createElement(c.a,{position:"static",id:"back-to-top-anchor"},n.createElement(o.a,null,n.createElement(d.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:h},n.createElement(v.a,null)),n.createElement("div",{style:{flexGrow:1}}),n.createElement(d.a,{"aria-label":"switchDarkMode",onClick:s,color:"inherit"},m?n.createElement(g.a,null):n.createElement(f.a,null)))),n.createElement(O.a,{anchor:"left",open:p,onClose:h,onOpen:h},n.createElement(xt,{toggleDrawer:h,onItemClick:function(e){return r(e)}})),n.createElement(Ct,{value:a,index:0},n.createElement(xe,null)),n.createElement(Ct,{value:a,index:1},n.createElement(wt,null)),n.createElement(N,null))},Wt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Bt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.render(n.createElement(Rt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/booking",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/booking","/service-worker.js");Wt?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Bt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Bt(t,e)}))}}()}},[[141,1,2]]]);
//# sourceMappingURL=main.f3395293.chunk.js.map